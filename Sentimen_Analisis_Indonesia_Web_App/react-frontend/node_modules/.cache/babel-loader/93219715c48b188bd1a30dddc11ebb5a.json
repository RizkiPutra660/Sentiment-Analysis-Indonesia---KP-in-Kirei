{"ast":null,"code":"/* shifty - v1.5.3 - 2016-11-29 - http://jeremyckahn.github.io/shifty */\n;\n(function () {\n  var root = this || Function('return this')();\n  /**\n   * Shifty Core\n   * By Jeremy Kahn - jeremyckahn@gmail.com\n   */\n\n  var Tweenable = function () {\n    'use strict'; // Aliases that get defined later in this function\n\n    var formula; // CONSTANTS\n\n    var DEFAULT_SCHEDULE_FUNCTION;\n    var DEFAULT_EASING = 'linear';\n    var DEFAULT_DURATION = 500;\n    var UPDATE_TIME = 1000 / 60;\n\n    var _now = Date.now ? Date.now : function () {\n      return +new Date();\n    };\n\n    var now = typeof SHIFTY_DEBUG_NOW !== 'undefined' ? SHIFTY_DEBUG_NOW : _now;\n\n    if (typeof window !== 'undefined') {\n      // requestAnimationFrame() shim by Paul Irish (modified for Shifty)\n      // http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n      DEFAULT_SCHEDULE_FUNCTION = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || window.mozCancelRequestAnimationFrame && window.mozRequestAnimationFrame || setTimeout;\n    } else {\n      DEFAULT_SCHEDULE_FUNCTION = setTimeout;\n    }\n\n    function noop() {// NOOP!\n    }\n    /**\n     * Handy shortcut for doing a for-in loop. This is not a \"normal\" each\n     * function, it is optimized for Shifty.  The iterator function only receives\n     * the property name, not the value.\n     * @param {Object} obj\n     * @param {Function(string)} fn\n     * @private\n     */\n\n\n    function each(obj, fn) {\n      var key;\n\n      for (key in obj) {\n        if (Object.hasOwnProperty.call(obj, key)) {\n          fn(key);\n        }\n      }\n    }\n    /**\n     * Perform a shallow copy of Object properties.\n     * @param {Object} targetObject The object to copy into\n     * @param {Object} srcObject The object to copy from\n     * @return {Object} A reference to the augmented `targetObj` Object\n     * @private\n     */\n\n\n    function shallowCopy(targetObj, srcObj) {\n      each(srcObj, function (prop) {\n        targetObj[prop] = srcObj[prop];\n      });\n      return targetObj;\n    }\n    /**\n     * Copies each property from src onto target, but only if the property to\n     * copy to target is undefined.\n     * @param {Object} target Missing properties in this Object are filled in\n     * @param {Object} src\n     * @private\n     */\n\n\n    function defaults(target, src) {\n      each(src, function (prop) {\n        if (typeof target[prop] === 'undefined') {\n          target[prop] = src[prop];\n        }\n      });\n    }\n    /**\n     * Calculates the interpolated tween values of an Object for a given\n     * timestamp.\n     * @param {Number} forPosition The position to compute the state for.\n     * @param {Object} currentState Current state properties.\n     * @param {Object} originalState: The original state properties the Object is\n     * tweening from.\n     * @param {Object} targetState: The destination state properties the Object\n     * is tweening to.\n     * @param {number} duration: The length of the tween in milliseconds.\n     * @param {number} timestamp: The UNIX epoch time at which the tween began.\n     * @param {Object} easing: This Object's keys must correspond to the keys in\n     * targetState.\n     * @private\n     */\n\n\n    function tweenProps(forPosition, currentState, originalState, targetState, duration, timestamp, easing) {\n      var normalizedPosition = forPosition < timestamp ? 0 : (forPosition - timestamp) / duration;\n      var prop;\n      var easingObjectProp;\n      var easingFn;\n\n      for (prop in currentState) {\n        if (currentState.hasOwnProperty(prop)) {\n          easingObjectProp = easing[prop];\n          easingFn = typeof easingObjectProp === 'function' ? easingObjectProp : formula[easingObjectProp];\n          currentState[prop] = tweenProp(originalState[prop], targetState[prop], easingFn, normalizedPosition);\n        }\n      }\n\n      return currentState;\n    }\n    /**\n     * Tweens a single property.\n     * @param {number} start The value that the tween started from.\n     * @param {number} end The value that the tween should end at.\n     * @param {Function} easingFunc The easing curve to apply to the tween.\n     * @param {number} position The normalized position (between 0.0 and 1.0) to\n     * calculate the midpoint of 'start' and 'end' against.\n     * @return {number} The tweened value.\n     * @private\n     */\n\n\n    function tweenProp(start, end, easingFunc, position) {\n      return start + (end - start) * easingFunc(position);\n    }\n    /**\n     * Applies a filter to Tweenable instance.\n     * @param {Tweenable} tweenable The `Tweenable` instance to call the filter\n     * upon.\n     * @param {String} filterName The name of the filter to apply.\n     * @private\n     */\n\n\n    function applyFilter(tweenable, filterName) {\n      var filters = Tweenable.prototype.filter;\n      var args = tweenable._filterArgs;\n      each(filters, function (name) {\n        if (typeof filters[name][filterName] !== 'undefined') {\n          filters[name][filterName].apply(tweenable, args);\n        }\n      });\n    }\n\n    var timeoutHandler_endTime;\n    var timeoutHandler_currentTime;\n    var timeoutHandler_isEnded;\n    var timeoutHandler_offset;\n    /**\n     * Handles the update logic for one step of a tween.\n     * @param {Tweenable} tweenable\n     * @param {number} timestamp\n     * @param {number} delay\n     * @param {number} duration\n     * @param {Object} currentState\n     * @param {Object} originalState\n     * @param {Object} targetState\n     * @param {Object} easing\n     * @param {Function(Object, *, number)} step\n     * @param {Function(Function,number)}} schedule\n     * @param {number=} opt_currentTimeOverride Needed for accurate timestamp in\n     * Tweenable#seek.\n     * @private\n     */\n\n    function timeoutHandler(tweenable, timestamp, delay, duration, currentState, originalState, targetState, easing, step, schedule, opt_currentTimeOverride) {\n      timeoutHandler_endTime = timestamp + delay + duration;\n      timeoutHandler_currentTime = Math.min(opt_currentTimeOverride || now(), timeoutHandler_endTime);\n      timeoutHandler_isEnded = timeoutHandler_currentTime >= timeoutHandler_endTime;\n      timeoutHandler_offset = duration - (timeoutHandler_endTime - timeoutHandler_currentTime);\n\n      if (tweenable.isPlaying()) {\n        if (timeoutHandler_isEnded) {\n          step(targetState, tweenable._attachment, timeoutHandler_offset);\n          tweenable.stop(true);\n        } else {\n          tweenable._scheduleId = schedule(tweenable._timeoutHandler, UPDATE_TIME);\n          applyFilter(tweenable, 'beforeTween'); // If the animation has not yet reached the start point (e.g., there was\n          // delay that has not yet completed), just interpolate the starting\n          // position of the tween.\n\n          if (timeoutHandler_currentTime < timestamp + delay) {\n            tweenProps(1, currentState, originalState, targetState, 1, 1, easing);\n          } else {\n            tweenProps(timeoutHandler_currentTime, currentState, originalState, targetState, duration, timestamp + delay, easing);\n          }\n\n          applyFilter(tweenable, 'afterTween');\n          step(currentState, tweenable._attachment, timeoutHandler_offset);\n        }\n      }\n    }\n    /**\n     * Creates a usable easing Object from a string, a function or another easing\n     * Object.  If `easing` is an Object, then this function clones it and fills\n     * in the missing properties with `\"linear\"`.\n     * @param {Object.<string|Function>} fromTweenParams\n     * @param {Object|string|Function} easing\n     * @return {Object.<string|Function>}\n     * @private\n     */\n\n\n    function composeEasingObject(fromTweenParams, easing) {\n      var composedEasing = {};\n      var typeofEasing = typeof easing;\n\n      if (typeofEasing === 'string' || typeofEasing === 'function') {\n        each(fromTweenParams, function (prop) {\n          composedEasing[prop] = easing;\n        });\n      } else {\n        each(fromTweenParams, function (prop) {\n          if (!composedEasing[prop]) {\n            composedEasing[prop] = easing[prop] || DEFAULT_EASING;\n          }\n        });\n      }\n\n      return composedEasing;\n    }\n    /**\n     * Tweenable constructor.\n     * @class Tweenable\n     * @param {Object=} opt_initialState The values that the initial tween should\n     * start at if a `from` object is not provided to `{{#crossLink\n     * \"Tweenable/tween:method\"}}{{/crossLink}}` or `{{#crossLink\n     * \"Tweenable/setConfig:method\"}}{{/crossLink}}`.\n     * @param {Object=} opt_config Configuration object to be passed to\n     * `{{#crossLink \"Tweenable/setConfig:method\"}}{{/crossLink}}`.\n     * @module Tweenable\n     * @constructor\n     */\n\n\n    function Tweenable(opt_initialState, opt_config) {\n      this._currentState = opt_initialState || {};\n      this._configured = false;\n      this._scheduleFunction = DEFAULT_SCHEDULE_FUNCTION; // To prevent unnecessary calls to setConfig do not set default\n      // configuration here.  Only set default configuration immediately before\n      // tweening if none has been set.\n\n      if (typeof opt_config !== 'undefined') {\n        this.setConfig(opt_config);\n      }\n    }\n    /**\n     * Configure and start a tween.\n     * @method tween\n     * @param {Object=} opt_config Configuration object to be passed to\n     * `{{#crossLink \"Tweenable/setConfig:method\"}}{{/crossLink}}`.\n     * @chainable\n     */\n\n\n    Tweenable.prototype.tween = function (opt_config) {\n      if (this._isTweening) {\n        return this;\n      } // Only set default config if no configuration has been set previously and\n      // none is provided now.\n\n\n      if (opt_config !== undefined || !this._configured) {\n        this.setConfig(opt_config);\n      }\n\n      this._timestamp = now();\n\n      this._start(this.get(), this._attachment);\n\n      return this.resume();\n    };\n    /**\n     * Configure a tween that will start at some point in the future.\n     *\n     * @method setConfig\n     * @param {Object} config The following values are valid:\n     * - __from__ (_Object=_): Starting position.  If omitted, `{{#crossLink\n     *   \"Tweenable/get:method\"}}get(){{/crossLink}}` is used.\n     * - __to__ (_Object=_): Ending position.\n     * - __duration__ (_number=_): How many milliseconds to animate for.\n     * - __delay__ (_delay=_): How many milliseconds to wait before starting the\n     *   tween.\n     * - __start__ (_Function(Object, *)_): Function to execute when the tween\n     *   begins.  Receives the state of the tween as the first parameter and\n     *   `attachment` as the second parameter.\n     * - __step__ (_Function(Object, *, number)_): Function to execute on every\n     *   tick.  Receives `{{#crossLink\n     *   \"Tweenable/get:method\"}}get(){{/crossLink}}` as the first parameter,\n     *   `attachment` as the second parameter, and the time elapsed since the\n     *   start of the tween as the third. This function is not called on the\n     *   final step of the animation, but `finish` is.\n     * - __finish__ (_Function(Object, *)_): Function to execute upon tween\n     *   completion.  Receives the state of the tween as the first parameter and\n     *   `attachment` as the second parameter.\n     * - __easing__ (_Object.<string|Function>|string|Function=_): Easing curve\n     *   name(s) or function(s) to use for the tween.\n     * - __attachment__ (_*_): Cached value that is passed to the\n     *   `step`/`start`/`finish` methods.\n     * @chainable\n     */\n\n\n    Tweenable.prototype.setConfig = function (config) {\n      config = config || {};\n      this._configured = true; // Attach something to this Tweenable instance (e.g.: a DOM element, an\n      // object, a string, etc.);\n\n      this._attachment = config.attachment; // Init the internal state\n\n      this._pausedAtTime = null;\n      this._scheduleId = null;\n      this._delay = config.delay || 0;\n      this._start = config.start || noop;\n      this._step = config.step || noop;\n      this._finish = config.finish || noop;\n      this._duration = config.duration || DEFAULT_DURATION;\n      this._currentState = shallowCopy({}, config.from || this.get());\n      this._originalState = this.get();\n      this._targetState = shallowCopy({}, config.to || this.get());\n      var self = this;\n\n      this._timeoutHandler = function () {\n        timeoutHandler(self, self._timestamp, self._delay, self._duration, self._currentState, self._originalState, self._targetState, self._easing, self._step, self._scheduleFunction);\n      }; // Aliases used below\n\n\n      var currentState = this._currentState;\n      var targetState = this._targetState; // Ensure that there is always something to tween to.\n\n      defaults(targetState, currentState);\n      this._easing = composeEasingObject(currentState, config.easing || DEFAULT_EASING);\n      this._filterArgs = [currentState, this._originalState, targetState, this._easing];\n      applyFilter(this, 'tweenCreated');\n      return this;\n    };\n    /**\n     * @method get\n     * @return {Object} The current state.\n     */\n\n\n    Tweenable.prototype.get = function () {\n      return shallowCopy({}, this._currentState);\n    };\n    /**\n     * @method set\n     * @param {Object} state The current state.\n     */\n\n\n    Tweenable.prototype.set = function (state) {\n      this._currentState = state;\n    };\n    /**\n     * Pause a tween.  Paused tweens can be resumed from the point at which they\n     * were paused.  This is different from `{{#crossLink\n     * \"Tweenable/stop:method\"}}{{/crossLink}}`, as that method\n     * causes a tween to start over when it is resumed.\n     * @method pause\n     * @chainable\n     */\n\n\n    Tweenable.prototype.pause = function () {\n      this._pausedAtTime = now();\n      this._isPaused = true;\n      return this;\n    };\n    /**\n     * Resume a paused tween.\n     * @method resume\n     * @chainable\n     */\n\n\n    Tweenable.prototype.resume = function () {\n      if (this._isPaused) {\n        this._timestamp += now() - this._pausedAtTime;\n      }\n\n      this._isPaused = false;\n      this._isTweening = true;\n\n      this._timeoutHandler();\n\n      return this;\n    };\n    /**\n     * Move the state of the animation to a specific point in the tween's\n     * timeline.  If the animation is not running, this will cause the `step`\n     * handlers to be called.\n     * @method seek\n     * @param {millisecond} millisecond The millisecond of the animation to seek\n     * to.  This must not be less than `0`.\n     * @chainable\n     */\n\n\n    Tweenable.prototype.seek = function (millisecond) {\n      millisecond = Math.max(millisecond, 0);\n      var currentTime = now();\n\n      if (this._timestamp + millisecond === 0) {\n        return this;\n      }\n\n      this._timestamp = currentTime - millisecond;\n\n      if (!this.isPlaying()) {\n        this._isTweening = true;\n        this._isPaused = false; // If the animation is not running, call timeoutHandler to make sure that\n        // any step handlers are run.\n\n        timeoutHandler(this, this._timestamp, this._delay, this._duration, this._currentState, this._originalState, this._targetState, this._easing, this._step, this._scheduleFunction, currentTime);\n        this.pause();\n      }\n\n      return this;\n    };\n    /**\n     * Stops and cancels a tween.\n     * @param {boolean=} gotoEnd If `false` or omitted, the tween just stops at\n     * its current state, and the `finish` handler is not invoked.  If `true`,\n     * the tweened object's values are instantly set to the target values, and\n     * `finish` is invoked.\n     * @method stop\n     * @chainable\n     */\n\n\n    Tweenable.prototype.stop = function (gotoEnd) {\n      this._isTweening = false;\n      this._isPaused = false;\n      this._timeoutHandler = noop;\n      (root.cancelAnimationFrame || root.webkitCancelAnimationFrame || root.oCancelAnimationFrame || root.msCancelAnimationFrame || root.mozCancelRequestAnimationFrame || root.clearTimeout)(this._scheduleId);\n\n      if (gotoEnd) {\n        applyFilter(this, 'beforeTween');\n        tweenProps(1, this._currentState, this._originalState, this._targetState, 1, 0, this._easing);\n        applyFilter(this, 'afterTween');\n        applyFilter(this, 'afterTweenEnd');\n\n        this._finish.call(this, this._currentState, this._attachment);\n      }\n\n      return this;\n    };\n    /**\n     * @method isPlaying\n     * @return {boolean} Whether or not a tween is running.\n     */\n\n\n    Tweenable.prototype.isPlaying = function () {\n      return this._isTweening && !this._isPaused;\n    };\n    /**\n     * Set a custom schedule function.\n     *\n     * If a custom function is not set,\n     * [`requestAnimationFrame`](https://developer.mozilla.org/en-US/docs/Web/API/window.requestAnimationFrame)\n     * is used if available, otherwise\n     * [`setTimeout`](https://developer.mozilla.org/en-US/docs/Web/API/Window.setTimeout)\n     * is used.\n     * @method setScheduleFunction\n     * @param {Function(Function,number)} scheduleFunction The function to be\n     * used to schedule the next frame to be rendered.\n     */\n\n\n    Tweenable.prototype.setScheduleFunction = function (scheduleFunction) {\n      this._scheduleFunction = scheduleFunction;\n    };\n    /**\n     * `delete` all \"own\" properties.  Call this when the `Tweenable` instance\n     * is no longer needed to free memory.\n     * @method dispose\n     */\n\n\n    Tweenable.prototype.dispose = function () {\n      var prop;\n\n      for (prop in this) {\n        if (this.hasOwnProperty(prop)) {\n          delete this[prop];\n        }\n      }\n    };\n    /**\n     * Filters are used for transforming the properties of a tween at various\n     * points in a Tweenable's life cycle.  See the README for more info on this.\n     * @private\n     */\n\n\n    Tweenable.prototype.filter = {};\n    /**\n     * This object contains all of the tweens available to Shifty.  It is\n     * extensible - simply attach properties to the `Tweenable.prototype.formula`\n     * Object following the same format as `linear`.\n     *\n     * `pos` should be a normalized `number` (between 0 and 1).\n     * @property formula\n     * @type {Object(function)}\n     */\n\n    Tweenable.prototype.formula = {\n      linear: function linear(pos) {\n        return pos;\n      }\n    };\n    formula = Tweenable.prototype.formula;\n    shallowCopy(Tweenable, {\n      'now': now,\n      'each': each,\n      'tweenProps': tweenProps,\n      'tweenProp': tweenProp,\n      'applyFilter': applyFilter,\n      'shallowCopy': shallowCopy,\n      'defaults': defaults,\n      'composeEasingObject': composeEasingObject\n    }); // `root` is provided in the intro/outro files.\n    // A hook used for unit testing.\n\n    if (typeof SHIFTY_DEBUG_NOW === 'function') {\n      root.timeoutHandler = timeoutHandler;\n    } // Bootstrap Tweenable appropriately for the environment.\n\n\n    if (typeof exports === 'object') {\n      // CommonJS\n      module.exports = Tweenable;\n    } else if (typeof define === 'function' && define.amd) {\n      // AMD\n      define(function () {\n        return Tweenable;\n      });\n    } else if (typeof root.Tweenable === 'undefined') {\n      // Browser: Make `Tweenable` globally accessible.\n      root.Tweenable = Tweenable;\n    }\n\n    return Tweenable;\n  }();\n  /*!\n   * All equations are adapted from Thomas Fuchs'\n   * [Scripty2](https://github.com/madrobby/scripty2/blob/master/src/effects/transitions/penner.js).\n   *\n   * Based on Easing Equations (c) 2003 [Robert\n   * Penner](http://www.robertpenner.com/), all rights reserved. This work is\n   * [subject to terms](http://www.robertpenner.com/easing_terms_of_use.html).\n   */\n\n  /*!\n   *  TERMS OF USE - EASING EQUATIONS\n   *  Open source under the BSD License.\n   *  Easing Equations (c) 2003 Robert Penner, all rights reserved.\n   */\n\n\n  ;\n\n  (function () {\n    Tweenable.shallowCopy(Tweenable.prototype.formula, {\n      easeInQuad: function easeInQuad(pos) {\n        return Math.pow(pos, 2);\n      },\n      easeOutQuad: function easeOutQuad(pos) {\n        return -(Math.pow(pos - 1, 2) - 1);\n      },\n      easeInOutQuad: function easeInOutQuad(pos) {\n        if ((pos /= 0.5) < 1) {\n          return 0.5 * Math.pow(pos, 2);\n        }\n\n        return -0.5 * ((pos -= 2) * pos - 2);\n      },\n      easeInCubic: function easeInCubic(pos) {\n        return Math.pow(pos, 3);\n      },\n      easeOutCubic: function easeOutCubic(pos) {\n        return Math.pow(pos - 1, 3) + 1;\n      },\n      easeInOutCubic: function easeInOutCubic(pos) {\n        if ((pos /= 0.5) < 1) {\n          return 0.5 * Math.pow(pos, 3);\n        }\n\n        return 0.5 * (Math.pow(pos - 2, 3) + 2);\n      },\n      easeInQuart: function easeInQuart(pos) {\n        return Math.pow(pos, 4);\n      },\n      easeOutQuart: function easeOutQuart(pos) {\n        return -(Math.pow(pos - 1, 4) - 1);\n      },\n      easeInOutQuart: function easeInOutQuart(pos) {\n        if ((pos /= 0.5) < 1) {\n          return 0.5 * Math.pow(pos, 4);\n        }\n\n        return -0.5 * ((pos -= 2) * Math.pow(pos, 3) - 2);\n      },\n      easeInQuint: function easeInQuint(pos) {\n        return Math.pow(pos, 5);\n      },\n      easeOutQuint: function easeOutQuint(pos) {\n        return Math.pow(pos - 1, 5) + 1;\n      },\n      easeInOutQuint: function easeInOutQuint(pos) {\n        if ((pos /= 0.5) < 1) {\n          return 0.5 * Math.pow(pos, 5);\n        }\n\n        return 0.5 * (Math.pow(pos - 2, 5) + 2);\n      },\n      easeInSine: function easeInSine(pos) {\n        return -Math.cos(pos * (Math.PI / 2)) + 1;\n      },\n      easeOutSine: function easeOutSine(pos) {\n        return Math.sin(pos * (Math.PI / 2));\n      },\n      easeInOutSine: function easeInOutSine(pos) {\n        return -0.5 * (Math.cos(Math.PI * pos) - 1);\n      },\n      easeInExpo: function easeInExpo(pos) {\n        return pos === 0 ? 0 : Math.pow(2, 10 * (pos - 1));\n      },\n      easeOutExpo: function easeOutExpo(pos) {\n        return pos === 1 ? 1 : -Math.pow(2, -10 * pos) + 1;\n      },\n      easeInOutExpo: function easeInOutExpo(pos) {\n        if (pos === 0) {\n          return 0;\n        }\n\n        if (pos === 1) {\n          return 1;\n        }\n\n        if ((pos /= 0.5) < 1) {\n          return 0.5 * Math.pow(2, 10 * (pos - 1));\n        }\n\n        return 0.5 * (-Math.pow(2, -10 * --pos) + 2);\n      },\n      easeInCirc: function easeInCirc(pos) {\n        return -(Math.sqrt(1 - pos * pos) - 1);\n      },\n      easeOutCirc: function easeOutCirc(pos) {\n        return Math.sqrt(1 - Math.pow(pos - 1, 2));\n      },\n      easeInOutCirc: function easeInOutCirc(pos) {\n        if ((pos /= 0.5) < 1) {\n          return -0.5 * (Math.sqrt(1 - pos * pos) - 1);\n        }\n\n        return 0.5 * (Math.sqrt(1 - (pos -= 2) * pos) + 1);\n      },\n      easeOutBounce: function easeOutBounce(pos) {\n        if (pos < 1 / 2.75) {\n          return 7.5625 * pos * pos;\n        } else if (pos < 2 / 2.75) {\n          return 7.5625 * (pos -= 1.5 / 2.75) * pos + 0.75;\n        } else if (pos < 2.5 / 2.75) {\n          return 7.5625 * (pos -= 2.25 / 2.75) * pos + 0.9375;\n        } else {\n          return 7.5625 * (pos -= 2.625 / 2.75) * pos + 0.984375;\n        }\n      },\n      easeInBack: function easeInBack(pos) {\n        var s = 1.70158;\n        return pos * pos * ((s + 1) * pos - s);\n      },\n      easeOutBack: function easeOutBack(pos) {\n        var s = 1.70158;\n        return (pos = pos - 1) * pos * ((s + 1) * pos + s) + 1;\n      },\n      easeInOutBack: function easeInOutBack(pos) {\n        var s = 1.70158;\n\n        if ((pos /= 0.5) < 1) {\n          return 0.5 * (pos * pos * (((s *= 1.525) + 1) * pos - s));\n        }\n\n        return 0.5 * ((pos -= 2) * pos * (((s *= 1.525) + 1) * pos + s) + 2);\n      },\n      elastic: function elastic(pos) {\n        // jshint maxlen:90\n        return -1 * Math.pow(4, -8 * pos) * Math.sin((pos * 6 - 1) * (2 * Math.PI) / 2) + 1;\n      },\n      swingFromTo: function swingFromTo(pos) {\n        var s = 1.70158;\n        return (pos /= 0.5) < 1 ? 0.5 * (pos * pos * (((s *= 1.525) + 1) * pos - s)) : 0.5 * ((pos -= 2) * pos * (((s *= 1.525) + 1) * pos + s) + 2);\n      },\n      swingFrom: function swingFrom(pos) {\n        var s = 1.70158;\n        return pos * pos * ((s + 1) * pos - s);\n      },\n      swingTo: function swingTo(pos) {\n        var s = 1.70158;\n        return (pos -= 1) * pos * ((s + 1) * pos + s) + 1;\n      },\n      bounce: function bounce(pos) {\n        if (pos < 1 / 2.75) {\n          return 7.5625 * pos * pos;\n        } else if (pos < 2 / 2.75) {\n          return 7.5625 * (pos -= 1.5 / 2.75) * pos + 0.75;\n        } else if (pos < 2.5 / 2.75) {\n          return 7.5625 * (pos -= 2.25 / 2.75) * pos + 0.9375;\n        } else {\n          return 7.5625 * (pos -= 2.625 / 2.75) * pos + 0.984375;\n        }\n      },\n      bouncePast: function bouncePast(pos) {\n        if (pos < 1 / 2.75) {\n          return 7.5625 * pos * pos;\n        } else if (pos < 2 / 2.75) {\n          return 2 - (7.5625 * (pos -= 1.5 / 2.75) * pos + 0.75);\n        } else if (pos < 2.5 / 2.75) {\n          return 2 - (7.5625 * (pos -= 2.25 / 2.75) * pos + 0.9375);\n        } else {\n          return 2 - (7.5625 * (pos -= 2.625 / 2.75) * pos + 0.984375);\n        }\n      },\n      easeFromTo: function easeFromTo(pos) {\n        if ((pos /= 0.5) < 1) {\n          return 0.5 * Math.pow(pos, 4);\n        }\n\n        return -0.5 * ((pos -= 2) * Math.pow(pos, 3) - 2);\n      },\n      easeFrom: function easeFrom(pos) {\n        return Math.pow(pos, 4);\n      },\n      easeTo: function easeTo(pos) {\n        return Math.pow(pos, 0.25);\n      }\n    });\n  })(); // jshint maxlen:100\n\n  /**\n   * The Bezier magic in this file is adapted/copied almost wholesale from\n   * [Scripty2](https://github.com/madrobby/scripty2/blob/master/src/effects/transitions/cubic-bezier.js),\n   * which was adapted from Apple code (which probably came from\n   * [here](http://opensource.apple.com/source/WebCore/WebCore-955.66/platform/graphics/UnitBezier.h)).\n   * Special thanks to Apple and Thomas Fuchs for much of this code.\n   */\n\n  /**\n   *  Copyright (c) 2006 Apple Computer, Inc. All rights reserved.\n   *\n   *  Redistribution and use in source and binary forms, with or without\n   *  modification, are permitted provided that the following conditions are met:\n   *\n   *  1. Redistributions of source code must retain the above copyright notice,\n   *  this list of conditions and the following disclaimer.\n   *\n   *  2. Redistributions in binary form must reproduce the above copyright notice,\n   *  this list of conditions and the following disclaimer in the documentation\n   *  and/or other materials provided with the distribution.\n   *\n   *  3. Neither the name of the copyright holder(s) nor the names of any\n   *  contributors may be used to endorse or promote products derived from\n   *  this software without specific prior written permission.\n   *\n   *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n   *  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n   *  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n   *  ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n   *  LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n   *  CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n   *  SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n   *  INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n   *  CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n   *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n   *  POSSIBILITY OF SUCH DAMAGE.\n   */\n\n\n  ;\n\n  (function () {\n    // port of webkit cubic bezier handling by http://www.netzgesta.de/dev/\n    function cubicBezierAtTime(t, p1x, p1y, p2x, p2y, duration) {\n      var ax = 0,\n          bx = 0,\n          cx = 0,\n          ay = 0,\n          by = 0,\n          cy = 0;\n\n      function sampleCurveX(t) {\n        return ((ax * t + bx) * t + cx) * t;\n      }\n\n      function sampleCurveY(t) {\n        return ((ay * t + by) * t + cy) * t;\n      }\n\n      function sampleCurveDerivativeX(t) {\n        return (3.0 * ax * t + 2.0 * bx) * t + cx;\n      }\n\n      function solveEpsilon(duration) {\n        return 1.0 / (200.0 * duration);\n      }\n\n      function solve(x, epsilon) {\n        return sampleCurveY(solveCurveX(x, epsilon));\n      }\n\n      function fabs(n) {\n        if (n >= 0) {\n          return n;\n        } else {\n          return 0 - n;\n        }\n      }\n\n      function solveCurveX(x, epsilon) {\n        var t0, t1, t2, x2, d2, i;\n\n        for (t2 = x, i = 0; i < 8; i++) {\n          x2 = sampleCurveX(t2) - x;\n\n          if (fabs(x2) < epsilon) {\n            return t2;\n          }\n\n          d2 = sampleCurveDerivativeX(t2);\n\n          if (fabs(d2) < 1e-6) {\n            break;\n          }\n\n          t2 = t2 - x2 / d2;\n        }\n\n        t0 = 0.0;\n        t1 = 1.0;\n        t2 = x;\n\n        if (t2 < t0) {\n          return t0;\n        }\n\n        if (t2 > t1) {\n          return t1;\n        }\n\n        while (t0 < t1) {\n          x2 = sampleCurveX(t2);\n\n          if (fabs(x2 - x) < epsilon) {\n            return t2;\n          }\n\n          if (x > x2) {\n            t0 = t2;\n          } else {\n            t1 = t2;\n          }\n\n          t2 = (t1 - t0) * 0.5 + t0;\n        }\n\n        return t2; // Failure.\n      }\n\n      cx = 3.0 * p1x;\n      bx = 3.0 * (p2x - p1x) - cx;\n      ax = 1.0 - cx - bx;\n      cy = 3.0 * p1y;\n      by = 3.0 * (p2y - p1y) - cy;\n      ay = 1.0 - cy - by;\n      return solve(t, solveEpsilon(duration));\n    }\n    /**\n     *  getCubicBezierTransition(x1, y1, x2, y2) -> Function\n     *\n     *  Generates a transition easing function that is compatible\n     *  with WebKit's CSS transitions `-webkit-transition-timing-function`\n     *  CSS property.\n     *\n     *  The W3C has more information about CSS3 transition timing functions:\n     *  http://www.w3.org/TR/css3-transitions/#transition-timing-function_tag\n     *\n     *  @param {number} x1\n     *  @param {number} y1\n     *  @param {number} x2\n     *  @param {number} y2\n     *  @return {function}\n     *  @private\n     */\n\n\n    function getCubicBezierTransition(x1, y1, x2, y2) {\n      return function (pos) {\n        return cubicBezierAtTime(pos, x1, y1, x2, y2, 1);\n      };\n    } // End ported code\n\n    /**\n     * Create a Bezier easing function and attach it to `{{#crossLink\n     * \"Tweenable/formula:property\"}}Tweenable#formula{{/crossLink}}`.  This\n     * function gives you total control over the easing curve.  Matthew Lein's\n     * [Ceaser](http://matthewlein.com/ceaser/) is a useful tool for visualizing\n     * the curves you can make with this function.\n     * @method setBezierFunction\n     * @param {string} name The name of the easing curve.  Overwrites the old\n     * easing function on `{{#crossLink\n     * \"Tweenable/formula:property\"}}Tweenable#formula{{/crossLink}}` if it\n     * exists.\n     * @param {number} x1\n     * @param {number} y1\n     * @param {number} x2\n     * @param {number} y2\n     * @return {function} The easing function that was attached to\n     * Tweenable.prototype.formula.\n     */\n\n\n    Tweenable.setBezierFunction = function (name, x1, y1, x2, y2) {\n      var cubicBezierTransition = getCubicBezierTransition(x1, y1, x2, y2);\n      cubicBezierTransition.displayName = name;\n      cubicBezierTransition.x1 = x1;\n      cubicBezierTransition.y1 = y1;\n      cubicBezierTransition.x2 = x2;\n      cubicBezierTransition.y2 = y2;\n      return Tweenable.prototype.formula[name] = cubicBezierTransition;\n    };\n    /**\n     * `delete` an easing function from `{{#crossLink\n     * \"Tweenable/formula:property\"}}Tweenable#formula{{/crossLink}}`.  Be\n     * careful with this method, as it `delete`s whatever easing formula matches\n     * `name` (which means you can delete standard Shifty easing functions).\n     * @method unsetBezierFunction\n     * @param {string} name The name of the easing function to delete.\n     * @return {function}\n     */\n\n\n    Tweenable.unsetBezierFunction = function (name) {\n      delete Tweenable.prototype.formula[name];\n    };\n  })();\n\n  ;\n\n  (function () {\n    function getInterpolatedValues(from, current, targetState, position, easing, delay) {\n      return Tweenable.tweenProps(position, current, from, targetState, 1, delay, easing);\n    } // Fake a Tweenable and patch some internals.  This approach allows us to\n    // skip uneccessary processing and object recreation, cutting down on garbage\n    // collection pauses.\n\n\n    var mockTweenable = new Tweenable();\n    mockTweenable._filterArgs = [];\n    /**\n     * Compute the midpoint of two Objects.  This method effectively calculates a\n     * specific frame of animation that `{{#crossLink\n     * \"Tweenable/tween:method\"}}{{/crossLink}}` does many times over the course\n     * of a full tween.\n     *\n     *     var interpolatedValues = Tweenable.interpolate({\n     *       width: '100px',\n     *       opacity: 0,\n     *       color: '#fff'\n     *     }, {\n     *       width: '200px',\n     *       opacity: 1,\n     *       color: '#000'\n     *     }, 0.5);\n     *\n     *     console.log(interpolatedValues);\n     *     // {opacity: 0.5, width: \"150px\", color: \"rgb(127,127,127)\"}\n     *\n     * @static\n     * @method interpolate\n     * @param {Object} from The starting values to tween from.\n     * @param {Object} targetState The ending values to tween to.\n     * @param {number} position The normalized position value (between `0.0` and\n     * `1.0`) to interpolate the values between `from` and `to` for.  `from`\n     * represents `0` and `to` represents `1`.\n     * @param {Object.<string|Function>|string|Function} easing The easing\n     * curve(s) to calculate the midpoint against.  You can reference any easing\n     * function attached to `Tweenable.prototype.formula`, or provide the easing\n     * function(s) directly.  If omitted, this defaults to \"linear\".\n     * @param {number=} opt_delay Optional delay to pad the beginning of the\n     * interpolated tween with.  This increases the range of `position` from (`0`\n     * through `1`) to (`0` through `1 + opt_delay`).  So, a delay of `0.5` would\n     * increase all valid values of `position` to numbers between `0` and `1.5`.\n     * @return {Object}\n     */\n\n    Tweenable.interpolate = function (from, targetState, position, easing, opt_delay) {\n      var current = Tweenable.shallowCopy({}, from);\n      var delay = opt_delay || 0;\n      var easingObject = Tweenable.composeEasingObject(from, easing || 'linear');\n      mockTweenable.set({}); // Alias and reuse the _filterArgs array instead of recreating it.\n\n      var filterArgs = mockTweenable._filterArgs;\n      filterArgs.length = 0;\n      filterArgs[0] = current;\n      filterArgs[1] = from;\n      filterArgs[2] = targetState;\n      filterArgs[3] = easingObject; // Any defined value transformation must be applied\n\n      Tweenable.applyFilter(mockTweenable, 'tweenCreated');\n      Tweenable.applyFilter(mockTweenable, 'beforeTween');\n      var interpolatedValues = getInterpolatedValues(from, current, targetState, position, easingObject, delay); // Transform values back into their original format\n\n      Tweenable.applyFilter(mockTweenable, 'afterTween');\n      return interpolatedValues;\n    };\n  })();\n  /**\n   * This module adds string interpolation support to Shifty.\n   *\n   * The Token extension allows Shifty to tween numbers inside of strings.  Among\n   * other things, this allows you to animate CSS properties.  For example, you\n   * can do this:\n   *\n   *     var tweenable = new Tweenable();\n   *     tweenable.tween({\n   *       from: { transform: 'translateX(45px)' },\n   *       to: { transform: 'translateX(90xp)' }\n   *     });\n   *\n   * `translateX(45)` will be tweened to `translateX(90)`.  To demonstrate:\n   *\n   *     var tweenable = new Tweenable();\n   *     tweenable.tween({\n   *       from: { transform: 'translateX(45px)' },\n   *       to: { transform: 'translateX(90px)' },\n   *       step: function (state) {\n   *         console.log(state.transform);\n   *       }\n   *     });\n   *\n   * The above snippet will log something like this in the console:\n   *\n   *     translateX(60.3px)\n   *     ...\n   *     translateX(76.05px)\n   *     ...\n   *     translateX(90px)\n   *\n   * Another use for this is animating colors:\n   *\n   *     var tweenable = new Tweenable();\n   *     tweenable.tween({\n   *       from: { color: 'rgb(0,255,0)' },\n   *       to: { color: 'rgb(255,0,255)' },\n   *       step: function (state) {\n   *         console.log(state.color);\n   *       }\n   *     });\n   *\n   * The above snippet will log something like this:\n   *\n   *     rgb(84,170,84)\n   *     ...\n   *     rgb(170,84,170)\n   *     ...\n   *     rgb(255,0,255)\n   *\n   * This extension also supports hexadecimal colors, in both long (`#ff00ff`)\n   * and short (`#f0f`) forms.  Be aware that hexadecimal input values will be\n   * converted into the equivalent RGB output values.  This is done to optimize\n   * for performance.\n   *\n   *     var tweenable = new Tweenable();\n   *     tweenable.tween({\n   *       from: { color: '#0f0' },\n   *       to: { color: '#f0f' },\n   *       step: function (state) {\n   *         console.log(state.color);\n   *       }\n   *     });\n   *\n   * This snippet will generate the same output as the one before it because\n   * equivalent values were supplied (just in hexadecimal form rather than RGB):\n   *\n   *     rgb(84,170,84)\n   *     ...\n   *     rgb(170,84,170)\n   *     ...\n   *     rgb(255,0,255)\n   *\n   * ## Easing support\n   *\n   * Easing works somewhat differently in the Token extension.  This is because\n   * some CSS properties have multiple values in them, and you might need to\n   * tween each value along its own easing curve.  A basic example:\n   *\n   *     var tweenable = new Tweenable();\n   *     tweenable.tween({\n   *       from: { transform: 'translateX(0px) translateY(0px)' },\n   *       to: { transform:   'translateX(100px) translateY(100px)' },\n   *       easing: { transform: 'easeInQuad' },\n   *       step: function (state) {\n   *         console.log(state.transform);\n   *       }\n   *     });\n   *\n   * The above snippet will create values like this:\n   *\n   *     translateX(11.56px) translateY(11.56px)\n   *     ...\n   *     translateX(46.24px) translateY(46.24px)\n   *     ...\n   *     translateX(100px) translateY(100px)\n   *\n   * In this case, the values for `translateX` and `translateY` are always the\n   * same for each step of the tween, because they have the same start and end\n   * points and both use the same easing curve.  We can also tween `translateX`\n   * and `translateY` along independent curves:\n   *\n   *     var tweenable = new Tweenable();\n   *     tweenable.tween({\n   *       from: { transform: 'translateX(0px) translateY(0px)' },\n   *       to: { transform:   'translateX(100px) translateY(100px)' },\n   *       easing: { transform: 'easeInQuad bounce' },\n   *       step: function (state) {\n   *         console.log(state.transform);\n   *       }\n   *     });\n   *\n   * The above snippet will create values like this:\n   *\n   *     translateX(10.89px) translateY(82.35px)\n   *     ...\n   *     translateX(44.89px) translateY(86.73px)\n   *     ...\n   *     translateX(100px) translateY(100px)\n   *\n   * `translateX` and `translateY` are not in sync anymore, because `easeInQuad`\n   * was specified for `translateX` and `bounce` for `translateY`.  Mixing and\n   * matching easing curves can make for some interesting motion in your\n   * animations.\n   *\n   * The order of the space-separated easing curves correspond the token values\n   * they apply to.  If there are more token values than easing curves listed,\n   * the last easing curve listed is used.\n   * @submodule Tweenable.token\n   */\n  // token function is defined above only so that dox-foundation sees it as\n  // documentation and renders it.  It is never used, and is optimized away at\n  // build time.\n\n\n  ;\n\n  (function (Tweenable) {\n    /**\n     * @typedef {{\n     *   formatString: string\n     *   chunkNames: Array.<string>\n     * }}\n     * @private\n     */\n    var formatManifest; // CONSTANTS\n\n    var R_NUMBER_COMPONENT = /(\\d|\\-|\\.)/;\n    var R_FORMAT_CHUNKS = /([^\\-0-9\\.]+)/g;\n    var R_UNFORMATTED_VALUES = /[0-9.\\-]+/g;\n    var R_RGB = new RegExp('rgb\\\\(' + R_UNFORMATTED_VALUES.source + /,\\s*/.source + R_UNFORMATTED_VALUES.source + /,\\s*/.source + R_UNFORMATTED_VALUES.source + '\\\\)', 'g');\n    var R_RGB_PREFIX = /^.*\\(/;\n    var R_HEX = /#([0-9]|[a-f]){3,6}/gi;\n    var VALUE_PLACEHOLDER = 'VAL'; // HELPERS\n\n    /**\n     * @param {Array.number} rawValues\n     * @param {string} prefix\n     *\n     * @return {Array.<string>}\n     * @private\n     */\n\n    function getFormatChunksFrom(rawValues, prefix) {\n      var accumulator = [];\n      var rawValuesLength = rawValues.length;\n      var i;\n\n      for (i = 0; i < rawValuesLength; i++) {\n        accumulator.push('_' + prefix + '_' + i);\n      }\n\n      return accumulator;\n    }\n    /**\n     * @param {string} formattedString\n     *\n     * @return {string}\n     * @private\n     */\n\n\n    function getFormatStringFrom(formattedString) {\n      var chunks = formattedString.match(R_FORMAT_CHUNKS);\n\n      if (!chunks) {\n        // chunks will be null if there were no tokens to parse in\n        // formattedString (for example, if formattedString is '2').  Coerce\n        // chunks to be useful here.\n        chunks = ['', '']; // If there is only one chunk, assume that the string is a number\n        // followed by a token...\n        // NOTE: This may be an unwise assumption.\n      } else if (chunks.length === 1 || // ...or if the string starts with a number component (\".\", \"-\", or a\n      // digit)...\n      formattedString.charAt(0).match(R_NUMBER_COMPONENT)) {\n        // ...prepend an empty string here to make sure that the formatted number\n        // is properly replaced by VALUE_PLACEHOLDER\n        chunks.unshift('');\n      }\n\n      return chunks.join(VALUE_PLACEHOLDER);\n    }\n    /**\n     * Convert all hex color values within a string to an rgb string.\n     *\n     * @param {Object} stateObject\n     *\n     * @return {Object} The modified obj\n     * @private\n     */\n\n\n    function sanitizeObjectForHexProps(stateObject) {\n      Tweenable.each(stateObject, function (prop) {\n        var currentProp = stateObject[prop];\n\n        if (typeof currentProp === 'string' && currentProp.match(R_HEX)) {\n          stateObject[prop] = sanitizeHexChunksToRGB(currentProp);\n        }\n      });\n    }\n    /**\n     * @param {string} str\n     *\n     * @return {string}\n     * @private\n     */\n\n\n    function sanitizeHexChunksToRGB(str) {\n      return filterStringChunks(R_HEX, str, convertHexToRGB);\n    }\n    /**\n     * @param {string} hexString\n     *\n     * @return {string}\n     * @private\n     */\n\n\n    function convertHexToRGB(hexString) {\n      var rgbArr = hexToRGBArray(hexString);\n      return 'rgb(' + rgbArr[0] + ',' + rgbArr[1] + ',' + rgbArr[2] + ')';\n    }\n\n    var hexToRGBArray_returnArray = [];\n    /**\n     * Convert a hexadecimal string to an array with three items, one each for\n     * the red, blue, and green decimal values.\n     *\n     * @param {string} hex A hexadecimal string.\n     *\n     * @returns {Array.<number>} The converted Array of RGB values if `hex` is a\n     * valid string, or an Array of three 0's.\n     * @private\n     */\n\n    function hexToRGBArray(hex) {\n      hex = hex.replace(/#/, ''); // If the string is a shorthand three digit hex notation, normalize it to\n      // the standard six digit notation\n\n      if (hex.length === 3) {\n        hex = hex.split('');\n        hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n      }\n\n      hexToRGBArray_returnArray[0] = hexToDec(hex.substr(0, 2));\n      hexToRGBArray_returnArray[1] = hexToDec(hex.substr(2, 2));\n      hexToRGBArray_returnArray[2] = hexToDec(hex.substr(4, 2));\n      return hexToRGBArray_returnArray;\n    }\n    /**\n     * Convert a base-16 number to base-10.\n     *\n     * @param {Number|String} hex The value to convert\n     *\n     * @returns {Number} The base-10 equivalent of `hex`.\n     * @private\n     */\n\n\n    function hexToDec(hex) {\n      return parseInt(hex, 16);\n    }\n    /**\n     * Runs a filter operation on all chunks of a string that match a RegExp\n     *\n     * @param {RegExp} pattern\n     * @param {string} unfilteredString\n     * @param {function(string)} filter\n     *\n     * @return {string}\n     * @private\n     */\n\n\n    function filterStringChunks(pattern, unfilteredString, filter) {\n      var pattenMatches = unfilteredString.match(pattern);\n      var filteredString = unfilteredString.replace(pattern, VALUE_PLACEHOLDER);\n\n      if (pattenMatches) {\n        var pattenMatchesLength = pattenMatches.length;\n        var currentChunk;\n\n        for (var i = 0; i < pattenMatchesLength; i++) {\n          currentChunk = pattenMatches.shift();\n          filteredString = filteredString.replace(VALUE_PLACEHOLDER, filter(currentChunk));\n        }\n      }\n\n      return filteredString;\n    }\n    /**\n     * Check for floating point values within rgb strings and rounds them.\n     *\n     * @param {string} formattedString\n     *\n     * @return {string}\n     * @private\n     */\n\n\n    function sanitizeRGBChunks(formattedString) {\n      return filterStringChunks(R_RGB, formattedString, sanitizeRGBChunk);\n    }\n    /**\n     * @param {string} rgbChunk\n     *\n     * @return {string}\n     * @private\n     */\n\n\n    function sanitizeRGBChunk(rgbChunk) {\n      var numbers = rgbChunk.match(R_UNFORMATTED_VALUES);\n      var numbersLength = numbers.length;\n      var sanitizedString = rgbChunk.match(R_RGB_PREFIX)[0];\n\n      for (var i = 0; i < numbersLength; i++) {\n        sanitizedString += parseInt(numbers[i], 10) + ',';\n      }\n\n      sanitizedString = sanitizedString.slice(0, -1) + ')';\n      return sanitizedString;\n    }\n    /**\n     * @param {Object} stateObject\n     *\n     * @return {Object} An Object of formatManifests that correspond to\n     * the string properties of stateObject\n     * @private\n     */\n\n\n    function getFormatManifests(stateObject) {\n      var manifestAccumulator = {};\n      Tweenable.each(stateObject, function (prop) {\n        var currentProp = stateObject[prop];\n\n        if (typeof currentProp === 'string') {\n          var rawValues = getValuesFrom(currentProp);\n          manifestAccumulator[prop] = {\n            'formatString': getFormatStringFrom(currentProp),\n            'chunkNames': getFormatChunksFrom(rawValues, prop)\n          };\n        }\n      });\n      return manifestAccumulator;\n    }\n    /**\n     * @param {Object} stateObject\n     * @param {Object} formatManifests\n     * @private\n     */\n\n\n    function expandFormattedProperties(stateObject, formatManifests) {\n      Tweenable.each(formatManifests, function (prop) {\n        var currentProp = stateObject[prop];\n        var rawValues = getValuesFrom(currentProp);\n        var rawValuesLength = rawValues.length;\n\n        for (var i = 0; i < rawValuesLength; i++) {\n          stateObject[formatManifests[prop].chunkNames[i]] = +rawValues[i];\n        }\n\n        delete stateObject[prop];\n      });\n    }\n    /**\n     * @param {Object} stateObject\n     * @param {Object} formatManifests\n     * @private\n     */\n\n\n    function collapseFormattedProperties(stateObject, formatManifests) {\n      Tweenable.each(formatManifests, function (prop) {\n        var currentProp = stateObject[prop];\n        var formatChunks = extractPropertyChunks(stateObject, formatManifests[prop].chunkNames);\n        var valuesList = getValuesList(formatChunks, formatManifests[prop].chunkNames);\n        currentProp = getFormattedValues(formatManifests[prop].formatString, valuesList);\n        stateObject[prop] = sanitizeRGBChunks(currentProp);\n      });\n    }\n    /**\n     * @param {Object} stateObject\n     * @param {Array.<string>} chunkNames\n     *\n     * @return {Object} The extracted value chunks.\n     * @private\n     */\n\n\n    function extractPropertyChunks(stateObject, chunkNames) {\n      var extractedValues = {};\n      var currentChunkName,\n          chunkNamesLength = chunkNames.length;\n\n      for (var i = 0; i < chunkNamesLength; i++) {\n        currentChunkName = chunkNames[i];\n        extractedValues[currentChunkName] = stateObject[currentChunkName];\n        delete stateObject[currentChunkName];\n      }\n\n      return extractedValues;\n    }\n\n    var getValuesList_accumulator = [];\n    /**\n     * @param {Object} stateObject\n     * @param {Array.<string>} chunkNames\n     *\n     * @return {Array.<number>}\n     * @private\n     */\n\n    function getValuesList(stateObject, chunkNames) {\n      getValuesList_accumulator.length = 0;\n      var chunkNamesLength = chunkNames.length;\n\n      for (var i = 0; i < chunkNamesLength; i++) {\n        getValuesList_accumulator.push(stateObject[chunkNames[i]]);\n      }\n\n      return getValuesList_accumulator;\n    }\n    /**\n     * @param {string} formatString\n     * @param {Array.<number>} rawValues\n     *\n     * @return {string}\n     * @private\n     */\n\n\n    function getFormattedValues(formatString, rawValues) {\n      var formattedValueString = formatString;\n      var rawValuesLength = rawValues.length;\n\n      for (var i = 0; i < rawValuesLength; i++) {\n        formattedValueString = formattedValueString.replace(VALUE_PLACEHOLDER, +rawValues[i].toFixed(4));\n      }\n\n      return formattedValueString;\n    }\n    /**\n     * Note: It's the duty of the caller to convert the Array elements of the\n     * return value into numbers.  This is a performance optimization.\n     *\n     * @param {string} formattedString\n     *\n     * @return {Array.<string>|null}\n     * @private\n     */\n\n\n    function getValuesFrom(formattedString) {\n      return formattedString.match(R_UNFORMATTED_VALUES);\n    }\n    /**\n     * @param {Object} easingObject\n     * @param {Object} tokenData\n     * @private\n     */\n\n\n    function expandEasingObject(easingObject, tokenData) {\n      Tweenable.each(tokenData, function (prop) {\n        var currentProp = tokenData[prop];\n        var chunkNames = currentProp.chunkNames;\n        var chunkLength = chunkNames.length;\n        var easing = easingObject[prop];\n        var i;\n\n        if (typeof easing === 'string') {\n          var easingChunks = easing.split(' ');\n          var lastEasingChunk = easingChunks[easingChunks.length - 1];\n\n          for (i = 0; i < chunkLength; i++) {\n            easingObject[chunkNames[i]] = easingChunks[i] || lastEasingChunk;\n          }\n        } else {\n          for (i = 0; i < chunkLength; i++) {\n            easingObject[chunkNames[i]] = easing;\n          }\n        }\n\n        delete easingObject[prop];\n      });\n    }\n    /**\n     * @param {Object} easingObject\n     * @param {Object} tokenData\n     * @private\n     */\n\n\n    function collapseEasingObject(easingObject, tokenData) {\n      Tweenable.each(tokenData, function (prop) {\n        var currentProp = tokenData[prop];\n        var chunkNames = currentProp.chunkNames;\n        var chunkLength = chunkNames.length;\n        var firstEasing = easingObject[chunkNames[0]];\n        var typeofEasings = typeof firstEasing;\n\n        if (typeofEasings === 'string') {\n          var composedEasingString = '';\n\n          for (var i = 0; i < chunkLength; i++) {\n            composedEasingString += ' ' + easingObject[chunkNames[i]];\n            delete easingObject[chunkNames[i]];\n          }\n\n          easingObject[prop] = composedEasingString.substr(1);\n        } else {\n          easingObject[prop] = firstEasing;\n        }\n      });\n    }\n\n    Tweenable.prototype.filter.token = {\n      'tweenCreated': function tweenCreated(currentState, fromState, toState, easingObject) {\n        sanitizeObjectForHexProps(currentState);\n        sanitizeObjectForHexProps(fromState);\n        sanitizeObjectForHexProps(toState);\n        this._tokenData = getFormatManifests(currentState);\n      },\n      'beforeTween': function beforeTween(currentState, fromState, toState, easingObject) {\n        expandEasingObject(easingObject, this._tokenData);\n        expandFormattedProperties(currentState, this._tokenData);\n        expandFormattedProperties(fromState, this._tokenData);\n        expandFormattedProperties(toState, this._tokenData);\n      },\n      'afterTween': function afterTween(currentState, fromState, toState, easingObject) {\n        collapseFormattedProperties(currentState, this._tokenData);\n        collapseFormattedProperties(fromState, this._tokenData);\n        collapseFormattedProperties(toState, this._tokenData);\n        collapseEasingObject(easingObject, this._tokenData);\n      }\n    };\n  })(Tweenable);\n}).call(null);","map":{"version":3,"sources":["/home/rizki/Unduhan/twitter-sentiment-analysis-web-app-master/react-frontend/node_modules/shifty/dist/shifty.js"],"names":["root","Function","Tweenable","formula","DEFAULT_SCHEDULE_FUNCTION","DEFAULT_EASING","DEFAULT_DURATION","UPDATE_TIME","_now","Date","now","SHIFTY_DEBUG_NOW","window","requestAnimationFrame","webkitRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","mozCancelRequestAnimationFrame","mozRequestAnimationFrame","setTimeout","noop","each","obj","fn","key","Object","hasOwnProperty","call","shallowCopy","targetObj","srcObj","prop","defaults","target","src","tweenProps","forPosition","currentState","originalState","targetState","duration","timestamp","easing","normalizedPosition","easingObjectProp","easingFn","tweenProp","start","end","easingFunc","position","applyFilter","tweenable","filterName","filters","prototype","filter","args","_filterArgs","name","apply","timeoutHandler_endTime","timeoutHandler_currentTime","timeoutHandler_isEnded","timeoutHandler_offset","timeoutHandler","delay","step","schedule","opt_currentTimeOverride","Math","min","isPlaying","_attachment","stop","_scheduleId","_timeoutHandler","composeEasingObject","fromTweenParams","composedEasing","typeofEasing","opt_initialState","opt_config","_currentState","_configured","_scheduleFunction","setConfig","tween","_isTweening","undefined","_timestamp","_start","get","resume","config","attachment","_pausedAtTime","_delay","_step","_finish","finish","_duration","from","_originalState","_targetState","to","self","_easing","set","state","pause","_isPaused","seek","millisecond","max","currentTime","gotoEnd","cancelAnimationFrame","webkitCancelAnimationFrame","oCancelAnimationFrame","msCancelAnimationFrame","clearTimeout","setScheduleFunction","scheduleFunction","dispose","linear","pos","exports","module","define","amd","easeInQuad","pow","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","cos","PI","easeOutSine","sin","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","sqrt","easeOutCirc","easeInOutCirc","easeOutBounce","easeInBack","s","easeOutBack","easeInOutBack","elastic","swingFromTo","swingFrom","swingTo","bounce","bouncePast","easeFromTo","easeFrom","easeTo","cubicBezierAtTime","t","p1x","p1y","p2x","p2y","ax","bx","cx","ay","by","cy","sampleCurveX","sampleCurveY","sampleCurveDerivativeX","solveEpsilon","solve","x","epsilon","solveCurveX","fabs","n","t0","t1","t2","x2","d2","i","getCubicBezierTransition","x1","y1","y2","setBezierFunction","cubicBezierTransition","displayName","unsetBezierFunction","getInterpolatedValues","current","mockTweenable","interpolate","opt_delay","easingObject","filterArgs","length","interpolatedValues","formatManifest","R_NUMBER_COMPONENT","R_FORMAT_CHUNKS","R_UNFORMATTED_VALUES","R_RGB","RegExp","source","R_RGB_PREFIX","R_HEX","VALUE_PLACEHOLDER","getFormatChunksFrom","rawValues","prefix","accumulator","rawValuesLength","push","getFormatStringFrom","formattedString","chunks","match","charAt","unshift","join","sanitizeObjectForHexProps","stateObject","currentProp","sanitizeHexChunksToRGB","str","filterStringChunks","convertHexToRGB","hexString","rgbArr","hexToRGBArray","hexToRGBArray_returnArray","hex","replace","split","hexToDec","substr","parseInt","pattern","unfilteredString","pattenMatches","filteredString","pattenMatchesLength","currentChunk","shift","sanitizeRGBChunks","sanitizeRGBChunk","rgbChunk","numbers","numbersLength","sanitizedString","slice","getFormatManifests","manifestAccumulator","getValuesFrom","expandFormattedProperties","formatManifests","chunkNames","collapseFormattedProperties","formatChunks","extractPropertyChunks","valuesList","getValuesList","getFormattedValues","formatString","extractedValues","currentChunkName","chunkNamesLength","getValuesList_accumulator","formattedValueString","toFixed","expandEasingObject","tokenData","chunkLength","easingChunks","lastEasingChunk","collapseEasingObject","firstEasing","typeofEasings","composedEasingString","token","fromState","toState","_tokenData"],"mappings":"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","sourcesContent":["/* shifty - v1.5.3 - 2016-11-29 - http://jeremyckahn.github.io/shifty */\n;(function () {\n  var root = this || Function('return this')();\n\n/**\n * Shifty Core\n * By Jeremy Kahn - jeremyckahn@gmail.com\n */\n\nvar Tweenable = (function () {\n\n  'use strict';\n\n  // Aliases that get defined later in this function\n  var formula;\n\n  // CONSTANTS\n  var DEFAULT_SCHEDULE_FUNCTION;\n  var DEFAULT_EASING = 'linear';\n  var DEFAULT_DURATION = 500;\n  var UPDATE_TIME = 1000 / 60;\n\n  var _now = Date.now\n       ? Date.now\n       : function () {return +new Date();};\n\n  var now = typeof SHIFTY_DEBUG_NOW !== 'undefined' ? SHIFTY_DEBUG_NOW : _now;\n\n  if (typeof window !== 'undefined') {\n    // requestAnimationFrame() shim by Paul Irish (modified for Shifty)\n    // http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n    DEFAULT_SCHEDULE_FUNCTION = window.requestAnimationFrame\n       || window.webkitRequestAnimationFrame\n       || window.oRequestAnimationFrame\n       || window.msRequestAnimationFrame\n       || (window.mozCancelRequestAnimationFrame\n       && window.mozRequestAnimationFrame)\n       || setTimeout;\n  } else {\n    DEFAULT_SCHEDULE_FUNCTION = setTimeout;\n  }\n\n  function noop () {\n    // NOOP!\n  }\n\n  /**\n   * Handy shortcut for doing a for-in loop. This is not a \"normal\" each\n   * function, it is optimized for Shifty.  The iterator function only receives\n   * the property name, not the value.\n   * @param {Object} obj\n   * @param {Function(string)} fn\n   * @private\n   */\n  function each (obj, fn) {\n    var key;\n    for (key in obj) {\n      if (Object.hasOwnProperty.call(obj, key)) {\n        fn(key);\n      }\n    }\n  }\n\n  /**\n   * Perform a shallow copy of Object properties.\n   * @param {Object} targetObject The object to copy into\n   * @param {Object} srcObject The object to copy from\n   * @return {Object} A reference to the augmented `targetObj` Object\n   * @private\n   */\n  function shallowCopy (targetObj, srcObj) {\n    each(srcObj, function (prop) {\n      targetObj[prop] = srcObj[prop];\n    });\n\n    return targetObj;\n  }\n\n  /**\n   * Copies each property from src onto target, but only if the property to\n   * copy to target is undefined.\n   * @param {Object} target Missing properties in this Object are filled in\n   * @param {Object} src\n   * @private\n   */\n  function defaults (target, src) {\n    each(src, function (prop) {\n      if (typeof target[prop] === 'undefined') {\n        target[prop] = src[prop];\n      }\n    });\n  }\n\n  /**\n   * Calculates the interpolated tween values of an Object for a given\n   * timestamp.\n   * @param {Number} forPosition The position to compute the state for.\n   * @param {Object} currentState Current state properties.\n   * @param {Object} originalState: The original state properties the Object is\n   * tweening from.\n   * @param {Object} targetState: The destination state properties the Object\n   * is tweening to.\n   * @param {number} duration: The length of the tween in milliseconds.\n   * @param {number} timestamp: The UNIX epoch time at which the tween began.\n   * @param {Object} easing: This Object's keys must correspond to the keys in\n   * targetState.\n   * @private\n   */\n  function tweenProps (forPosition, currentState, originalState, targetState,\n    duration, timestamp, easing) {\n    var normalizedPosition =\n        forPosition < timestamp ? 0 : (forPosition - timestamp) / duration;\n\n\n    var prop;\n    var easingObjectProp;\n    var easingFn;\n    for (prop in currentState) {\n      if (currentState.hasOwnProperty(prop)) {\n        easingObjectProp = easing[prop];\n        easingFn = typeof easingObjectProp === 'function'\n          ? easingObjectProp\n          : formula[easingObjectProp];\n\n        currentState[prop] = tweenProp(\n          originalState[prop],\n          targetState[prop],\n          easingFn,\n          normalizedPosition\n        );\n      }\n    }\n\n    return currentState;\n  }\n\n  /**\n   * Tweens a single property.\n   * @param {number} start The value that the tween started from.\n   * @param {number} end The value that the tween should end at.\n   * @param {Function} easingFunc The easing curve to apply to the tween.\n   * @param {number} position The normalized position (between 0.0 and 1.0) to\n   * calculate the midpoint of 'start' and 'end' against.\n   * @return {number} The tweened value.\n   * @private\n   */\n  function tweenProp (start, end, easingFunc, position) {\n    return start + (end - start) * easingFunc(position);\n  }\n\n  /**\n   * Applies a filter to Tweenable instance.\n   * @param {Tweenable} tweenable The `Tweenable` instance to call the filter\n   * upon.\n   * @param {String} filterName The name of the filter to apply.\n   * @private\n   */\n  function applyFilter (tweenable, filterName) {\n    var filters = Tweenable.prototype.filter;\n    var args = tweenable._filterArgs;\n\n    each(filters, function (name) {\n      if (typeof filters[name][filterName] !== 'undefined') {\n        filters[name][filterName].apply(tweenable, args);\n      }\n    });\n  }\n\n  var timeoutHandler_endTime;\n  var timeoutHandler_currentTime;\n  var timeoutHandler_isEnded;\n  var timeoutHandler_offset;\n  /**\n   * Handles the update logic for one step of a tween.\n   * @param {Tweenable} tweenable\n   * @param {number} timestamp\n   * @param {number} delay\n   * @param {number} duration\n   * @param {Object} currentState\n   * @param {Object} originalState\n   * @param {Object} targetState\n   * @param {Object} easing\n   * @param {Function(Object, *, number)} step\n   * @param {Function(Function,number)}} schedule\n   * @param {number=} opt_currentTimeOverride Needed for accurate timestamp in\n   * Tweenable#seek.\n   * @private\n   */\n  function timeoutHandler (tweenable, timestamp, delay, duration, currentState,\n    originalState, targetState, easing, step, schedule,\n    opt_currentTimeOverride) {\n\n    timeoutHandler_endTime = timestamp + delay + duration;\n\n    timeoutHandler_currentTime =\n    Math.min(opt_currentTimeOverride || now(), timeoutHandler_endTime);\n\n    timeoutHandler_isEnded =\n      timeoutHandler_currentTime >= timeoutHandler_endTime;\n\n    timeoutHandler_offset = duration - (\n      timeoutHandler_endTime - timeoutHandler_currentTime);\n\n    if (tweenable.isPlaying()) {\n      if (timeoutHandler_isEnded) {\n        step(targetState, tweenable._attachment, timeoutHandler_offset);\n        tweenable.stop(true);\n      } else {\n        tweenable._scheduleId =\n          schedule(tweenable._timeoutHandler, UPDATE_TIME);\n\n        applyFilter(tweenable, 'beforeTween');\n\n        // If the animation has not yet reached the start point (e.g., there was\n        // delay that has not yet completed), just interpolate the starting\n        // position of the tween.\n        if (timeoutHandler_currentTime < (timestamp + delay)) {\n          tweenProps(1, currentState, originalState, targetState, 1, 1, easing);\n        } else {\n          tweenProps(timeoutHandler_currentTime, currentState, originalState,\n            targetState, duration, timestamp + delay, easing);\n        }\n\n        applyFilter(tweenable, 'afterTween');\n\n        step(currentState, tweenable._attachment, timeoutHandler_offset);\n      }\n    }\n  }\n\n\n  /**\n   * Creates a usable easing Object from a string, a function or another easing\n   * Object.  If `easing` is an Object, then this function clones it and fills\n   * in the missing properties with `\"linear\"`.\n   * @param {Object.<string|Function>} fromTweenParams\n   * @param {Object|string|Function} easing\n   * @return {Object.<string|Function>}\n   * @private\n   */\n  function composeEasingObject (fromTweenParams, easing) {\n    var composedEasing = {};\n    var typeofEasing = typeof easing;\n\n    if (typeofEasing === 'string' || typeofEasing === 'function') {\n      each(fromTweenParams, function (prop) {\n        composedEasing[prop] = easing;\n      });\n    } else {\n      each(fromTweenParams, function (prop) {\n        if (!composedEasing[prop]) {\n          composedEasing[prop] = easing[prop] || DEFAULT_EASING;\n        }\n      });\n    }\n\n    return composedEasing;\n  }\n\n  /**\n   * Tweenable constructor.\n   * @class Tweenable\n   * @param {Object=} opt_initialState The values that the initial tween should\n   * start at if a `from` object is not provided to `{{#crossLink\n   * \"Tweenable/tween:method\"}}{{/crossLink}}` or `{{#crossLink\n   * \"Tweenable/setConfig:method\"}}{{/crossLink}}`.\n   * @param {Object=} opt_config Configuration object to be passed to\n   * `{{#crossLink \"Tweenable/setConfig:method\"}}{{/crossLink}}`.\n   * @module Tweenable\n   * @constructor\n   */\n  function Tweenable (opt_initialState, opt_config) {\n    this._currentState = opt_initialState || {};\n    this._configured = false;\n    this._scheduleFunction = DEFAULT_SCHEDULE_FUNCTION;\n\n    // To prevent unnecessary calls to setConfig do not set default\n    // configuration here.  Only set default configuration immediately before\n    // tweening if none has been set.\n    if (typeof opt_config !== 'undefined') {\n      this.setConfig(opt_config);\n    }\n  }\n\n  /**\n   * Configure and start a tween.\n   * @method tween\n   * @param {Object=} opt_config Configuration object to be passed to\n   * `{{#crossLink \"Tweenable/setConfig:method\"}}{{/crossLink}}`.\n   * @chainable\n   */\n  Tweenable.prototype.tween = function (opt_config) {\n    if (this._isTweening) {\n      return this;\n    }\n\n    // Only set default config if no configuration has been set previously and\n    // none is provided now.\n    if (opt_config !== undefined || !this._configured) {\n      this.setConfig(opt_config);\n    }\n\n    this._timestamp = now();\n    this._start(this.get(), this._attachment);\n    return this.resume();\n  };\n\n  /**\n   * Configure a tween that will start at some point in the future.\n   *\n   * @method setConfig\n   * @param {Object} config The following values are valid:\n   * - __from__ (_Object=_): Starting position.  If omitted, `{{#crossLink\n   *   \"Tweenable/get:method\"}}get(){{/crossLink}}` is used.\n   * - __to__ (_Object=_): Ending position.\n   * - __duration__ (_number=_): How many milliseconds to animate for.\n   * - __delay__ (_delay=_): How many milliseconds to wait before starting the\n   *   tween.\n   * - __start__ (_Function(Object, *)_): Function to execute when the tween\n   *   begins.  Receives the state of the tween as the first parameter and\n   *   `attachment` as the second parameter.\n   * - __step__ (_Function(Object, *, number)_): Function to execute on every\n   *   tick.  Receives `{{#crossLink\n   *   \"Tweenable/get:method\"}}get(){{/crossLink}}` as the first parameter,\n   *   `attachment` as the second parameter, and the time elapsed since the\n   *   start of the tween as the third. This function is not called on the\n   *   final step of the animation, but `finish` is.\n   * - __finish__ (_Function(Object, *)_): Function to execute upon tween\n   *   completion.  Receives the state of the tween as the first parameter and\n   *   `attachment` as the second parameter.\n   * - __easing__ (_Object.<string|Function>|string|Function=_): Easing curve\n   *   name(s) or function(s) to use for the tween.\n   * - __attachment__ (_*_): Cached value that is passed to the\n   *   `step`/`start`/`finish` methods.\n   * @chainable\n   */\n  Tweenable.prototype.setConfig = function (config) {\n    config = config || {};\n    this._configured = true;\n\n    // Attach something to this Tweenable instance (e.g.: a DOM element, an\n    // object, a string, etc.);\n    this._attachment = config.attachment;\n\n    // Init the internal state\n    this._pausedAtTime = null;\n    this._scheduleId = null;\n    this._delay = config.delay || 0;\n    this._start = config.start || noop;\n    this._step = config.step || noop;\n    this._finish = config.finish || noop;\n    this._duration = config.duration || DEFAULT_DURATION;\n    this._currentState = shallowCopy({}, config.from || this.get());\n    this._originalState = this.get();\n    this._targetState = shallowCopy({}, config.to || this.get());\n\n    var self = this;\n    this._timeoutHandler = function () {\n      timeoutHandler(self,\n        self._timestamp,\n        self._delay,\n        self._duration,\n        self._currentState,\n        self._originalState,\n        self._targetState,\n        self._easing,\n        self._step,\n        self._scheduleFunction\n      );\n    };\n\n    // Aliases used below\n    var currentState = this._currentState;\n    var targetState = this._targetState;\n\n    // Ensure that there is always something to tween to.\n    defaults(targetState, currentState);\n\n    this._easing = composeEasingObject(\n      currentState, config.easing || DEFAULT_EASING);\n\n    this._filterArgs =\n      [currentState, this._originalState, targetState, this._easing];\n\n    applyFilter(this, 'tweenCreated');\n    return this;\n  };\n\n  /**\n   * @method get\n   * @return {Object} The current state.\n   */\n  Tweenable.prototype.get = function () {\n    return shallowCopy({}, this._currentState);\n  };\n\n  /**\n   * @method set\n   * @param {Object} state The current state.\n   */\n  Tweenable.prototype.set = function (state) {\n    this._currentState = state;\n  };\n\n  /**\n   * Pause a tween.  Paused tweens can be resumed from the point at which they\n   * were paused.  This is different from `{{#crossLink\n   * \"Tweenable/stop:method\"}}{{/crossLink}}`, as that method\n   * causes a tween to start over when it is resumed.\n   * @method pause\n   * @chainable\n   */\n  Tweenable.prototype.pause = function () {\n    this._pausedAtTime = now();\n    this._isPaused = true;\n    return this;\n  };\n\n  /**\n   * Resume a paused tween.\n   * @method resume\n   * @chainable\n   */\n  Tweenable.prototype.resume = function () {\n    if (this._isPaused) {\n      this._timestamp += now() - this._pausedAtTime;\n    }\n\n    this._isPaused = false;\n    this._isTweening = true;\n\n    this._timeoutHandler();\n\n    return this;\n  };\n\n  /**\n   * Move the state of the animation to a specific point in the tween's\n   * timeline.  If the animation is not running, this will cause the `step`\n   * handlers to be called.\n   * @method seek\n   * @param {millisecond} millisecond The millisecond of the animation to seek\n   * to.  This must not be less than `0`.\n   * @chainable\n   */\n  Tweenable.prototype.seek = function (millisecond) {\n    millisecond = Math.max(millisecond, 0);\n    var currentTime = now();\n\n    if ((this._timestamp + millisecond) === 0) {\n      return this;\n    }\n\n    this._timestamp = currentTime - millisecond;\n\n    if (!this.isPlaying()) {\n      this._isTweening = true;\n      this._isPaused = false;\n\n      // If the animation is not running, call timeoutHandler to make sure that\n      // any step handlers are run.\n      timeoutHandler(this,\n        this._timestamp,\n        this._delay,\n        this._duration,\n        this._currentState,\n        this._originalState,\n        this._targetState,\n        this._easing,\n        this._step,\n        this._scheduleFunction,\n        currentTime\n      );\n\n      this.pause();\n    }\n\n    return this;\n  };\n\n  /**\n   * Stops and cancels a tween.\n   * @param {boolean=} gotoEnd If `false` or omitted, the tween just stops at\n   * its current state, and the `finish` handler is not invoked.  If `true`,\n   * the tweened object's values are instantly set to the target values, and\n   * `finish` is invoked.\n   * @method stop\n   * @chainable\n   */\n  Tweenable.prototype.stop = function (gotoEnd) {\n    this._isTweening = false;\n    this._isPaused = false;\n    this._timeoutHandler = noop;\n\n    (root.cancelAnimationFrame            ||\n    root.webkitCancelAnimationFrame     ||\n    root.oCancelAnimationFrame          ||\n    root.msCancelAnimationFrame         ||\n    root.mozCancelRequestAnimationFrame ||\n    root.clearTimeout)(this._scheduleId);\n\n    if (gotoEnd) {\n      applyFilter(this, 'beforeTween');\n      tweenProps(\n        1,\n        this._currentState,\n        this._originalState,\n        this._targetState,\n        1,\n        0,\n        this._easing\n      );\n      applyFilter(this, 'afterTween');\n      applyFilter(this, 'afterTweenEnd');\n      this._finish.call(this, this._currentState, this._attachment);\n    }\n\n    return this;\n  };\n\n  /**\n   * @method isPlaying\n   * @return {boolean} Whether or not a tween is running.\n   */\n  Tweenable.prototype.isPlaying = function () {\n    return this._isTweening && !this._isPaused;\n  };\n\n  /**\n   * Set a custom schedule function.\n   *\n   * If a custom function is not set,\n   * [`requestAnimationFrame`](https://developer.mozilla.org/en-US/docs/Web/API/window.requestAnimationFrame)\n   * is used if available, otherwise\n   * [`setTimeout`](https://developer.mozilla.org/en-US/docs/Web/API/Window.setTimeout)\n   * is used.\n   * @method setScheduleFunction\n   * @param {Function(Function,number)} scheduleFunction The function to be\n   * used to schedule the next frame to be rendered.\n   */\n  Tweenable.prototype.setScheduleFunction = function (scheduleFunction) {\n    this._scheduleFunction = scheduleFunction;\n  };\n\n  /**\n   * `delete` all \"own\" properties.  Call this when the `Tweenable` instance\n   * is no longer needed to free memory.\n   * @method dispose\n   */\n  Tweenable.prototype.dispose = function () {\n    var prop;\n    for (prop in this) {\n      if (this.hasOwnProperty(prop)) {\n        delete this[prop];\n      }\n    }\n  };\n\n  /**\n   * Filters are used for transforming the properties of a tween at various\n   * points in a Tweenable's life cycle.  See the README for more info on this.\n   * @private\n   */\n  Tweenable.prototype.filter = {};\n\n  /**\n   * This object contains all of the tweens available to Shifty.  It is\n   * extensible - simply attach properties to the `Tweenable.prototype.formula`\n   * Object following the same format as `linear`.\n   *\n   * `pos` should be a normalized `number` (between 0 and 1).\n   * @property formula\n   * @type {Object(function)}\n   */\n  Tweenable.prototype.formula = {\n    linear: function (pos) {\n      return pos;\n    }\n  };\n\n  formula = Tweenable.prototype.formula;\n\n  shallowCopy(Tweenable, {\n    'now': now\n    ,'each': each\n    ,'tweenProps': tweenProps\n    ,'tweenProp': tweenProp\n    ,'applyFilter': applyFilter\n    ,'shallowCopy': shallowCopy\n    ,'defaults': defaults\n    ,'composeEasingObject': composeEasingObject\n  });\n\n  // `root` is provided in the intro/outro files.\n\n  // A hook used for unit testing.\n  if (typeof SHIFTY_DEBUG_NOW === 'function') {\n    root.timeoutHandler = timeoutHandler;\n  }\n\n  // Bootstrap Tweenable appropriately for the environment.\n  if (typeof exports === 'object') {\n    // CommonJS\n    module.exports = Tweenable;\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(function () {return Tweenable;});\n  } else if (typeof root.Tweenable === 'undefined') {\n    // Browser: Make `Tweenable` globally accessible.\n    root.Tweenable = Tweenable;\n  }\n\n  return Tweenable;\n\n} ());\n\n/*!\n * All equations are adapted from Thomas Fuchs'\n * [Scripty2](https://github.com/madrobby/scripty2/blob/master/src/effects/transitions/penner.js).\n *\n * Based on Easing Equations (c) 2003 [Robert\n * Penner](http://www.robertpenner.com/), all rights reserved. This work is\n * [subject to terms](http://www.robertpenner.com/easing_terms_of_use.html).\n */\n\n/*!\n *  TERMS OF USE - EASING EQUATIONS\n *  Open source under the BSD License.\n *  Easing Equations (c) 2003 Robert Penner, all rights reserved.\n */\n\n;(function () {\n\n  Tweenable.shallowCopy(Tweenable.prototype.formula, {\n    easeInQuad: function (pos) {\n      return Math.pow(pos, 2);\n    },\n\n    easeOutQuad: function (pos) {\n      return -(Math.pow((pos - 1), 2) - 1);\n    },\n\n    easeInOutQuad: function (pos) {\n      if ((pos /= 0.5) < 1) {return 0.5 * Math.pow(pos,2);}\n      return -0.5 * ((pos -= 2) * pos - 2);\n    },\n\n    easeInCubic: function (pos) {\n      return Math.pow(pos, 3);\n    },\n\n    easeOutCubic: function (pos) {\n      return (Math.pow((pos - 1), 3) + 1);\n    },\n\n    easeInOutCubic: function (pos) {\n      if ((pos /= 0.5) < 1) {return 0.5 * Math.pow(pos,3);}\n      return 0.5 * (Math.pow((pos - 2),3) + 2);\n    },\n\n    easeInQuart: function (pos) {\n      return Math.pow(pos, 4);\n    },\n\n    easeOutQuart: function (pos) {\n      return -(Math.pow((pos - 1), 4) - 1);\n    },\n\n    easeInOutQuart: function (pos) {\n      if ((pos /= 0.5) < 1) {return 0.5 * Math.pow(pos,4);}\n      return -0.5 * ((pos -= 2) * Math.pow(pos,3) - 2);\n    },\n\n    easeInQuint: function (pos) {\n      return Math.pow(pos, 5);\n    },\n\n    easeOutQuint: function (pos) {\n      return (Math.pow((pos - 1), 5) + 1);\n    },\n\n    easeInOutQuint: function (pos) {\n      if ((pos /= 0.5) < 1) {return 0.5 * Math.pow(pos,5);}\n      return 0.5 * (Math.pow((pos - 2),5) + 2);\n    },\n\n    easeInSine: function (pos) {\n      return -Math.cos(pos * (Math.PI / 2)) + 1;\n    },\n\n    easeOutSine: function (pos) {\n      return Math.sin(pos * (Math.PI / 2));\n    },\n\n    easeInOutSine: function (pos) {\n      return (-0.5 * (Math.cos(Math.PI * pos) - 1));\n    },\n\n    easeInExpo: function (pos) {\n      return (pos === 0) ? 0 : Math.pow(2, 10 * (pos - 1));\n    },\n\n    easeOutExpo: function (pos) {\n      return (pos === 1) ? 1 : -Math.pow(2, -10 * pos) + 1;\n    },\n\n    easeInOutExpo: function (pos) {\n      if (pos === 0) {return 0;}\n      if (pos === 1) {return 1;}\n      if ((pos /= 0.5) < 1) {return 0.5 * Math.pow(2,10 * (pos - 1));}\n      return 0.5 * (-Math.pow(2, -10 * --pos) + 2);\n    },\n\n    easeInCirc: function (pos) {\n      return -(Math.sqrt(1 - (pos * pos)) - 1);\n    },\n\n    easeOutCirc: function (pos) {\n      return Math.sqrt(1 - Math.pow((pos - 1), 2));\n    },\n\n    easeInOutCirc: function (pos) {\n      if ((pos /= 0.5) < 1) {return -0.5 * (Math.sqrt(1 - pos * pos) - 1);}\n      return 0.5 * (Math.sqrt(1 - (pos -= 2) * pos) + 1);\n    },\n\n    easeOutBounce: function (pos) {\n      if ((pos) < (1 / 2.75)) {\n        return (7.5625 * pos * pos);\n      } else if (pos < (2 / 2.75)) {\n        return (7.5625 * (pos -= (1.5 / 2.75)) * pos + 0.75);\n      } else if (pos < (2.5 / 2.75)) {\n        return (7.5625 * (pos -= (2.25 / 2.75)) * pos + 0.9375);\n      } else {\n        return (7.5625 * (pos -= (2.625 / 2.75)) * pos + 0.984375);\n      }\n    },\n\n    easeInBack: function (pos) {\n      var s = 1.70158;\n      return (pos) * pos * ((s + 1) * pos - s);\n    },\n\n    easeOutBack: function (pos) {\n      var s = 1.70158;\n      return (pos = pos - 1) * pos * ((s + 1) * pos + s) + 1;\n    },\n\n    easeInOutBack: function (pos) {\n      var s = 1.70158;\n      if ((pos /= 0.5) < 1) {\n        return 0.5 * (pos * pos * (((s *= (1.525)) + 1) * pos - s));\n      }\n      return 0.5 * ((pos -= 2) * pos * (((s *= (1.525)) + 1) * pos + s) + 2);\n    },\n\n    elastic: function (pos) {\n      // jshint maxlen:90\n      return -1 * Math.pow(4,-8 * pos) * Math.sin((pos * 6 - 1) * (2 * Math.PI) / 2) + 1;\n    },\n\n    swingFromTo: function (pos) {\n      var s = 1.70158;\n      return ((pos /= 0.5) < 1) ?\n          0.5 * (pos * pos * (((s *= (1.525)) + 1) * pos - s)) :\n          0.5 * ((pos -= 2) * pos * (((s *= (1.525)) + 1) * pos + s) + 2);\n    },\n\n    swingFrom: function (pos) {\n      var s = 1.70158;\n      return pos * pos * ((s + 1) * pos - s);\n    },\n\n    swingTo: function (pos) {\n      var s = 1.70158;\n      return (pos -= 1) * pos * ((s + 1) * pos + s) + 1;\n    },\n\n    bounce: function (pos) {\n      if (pos < (1 / 2.75)) {\n        return (7.5625 * pos * pos);\n      } else if (pos < (2 / 2.75)) {\n        return (7.5625 * (pos -= (1.5 / 2.75)) * pos + 0.75);\n      } else if (pos < (2.5 / 2.75)) {\n        return (7.5625 * (pos -= (2.25 / 2.75)) * pos + 0.9375);\n      } else {\n        return (7.5625 * (pos -= (2.625 / 2.75)) * pos + 0.984375);\n      }\n    },\n\n    bouncePast: function (pos) {\n      if (pos < (1 / 2.75)) {\n        return (7.5625 * pos * pos);\n      } else if (pos < (2 / 2.75)) {\n        return 2 - (7.5625 * (pos -= (1.5 / 2.75)) * pos + 0.75);\n      } else if (pos < (2.5 / 2.75)) {\n        return 2 - (7.5625 * (pos -= (2.25 / 2.75)) * pos + 0.9375);\n      } else {\n        return 2 - (7.5625 * (pos -= (2.625 / 2.75)) * pos + 0.984375);\n      }\n    },\n\n    easeFromTo: function (pos) {\n      if ((pos /= 0.5) < 1) {return 0.5 * Math.pow(pos,4);}\n      return -0.5 * ((pos -= 2) * Math.pow(pos,3) - 2);\n    },\n\n    easeFrom: function (pos) {\n      return Math.pow(pos,4);\n    },\n\n    easeTo: function (pos) {\n      return Math.pow(pos,0.25);\n    }\n  });\n\n}());\n\n// jshint maxlen:100\n/**\n * The Bezier magic in this file is adapted/copied almost wholesale from\n * [Scripty2](https://github.com/madrobby/scripty2/blob/master/src/effects/transitions/cubic-bezier.js),\n * which was adapted from Apple code (which probably came from\n * [here](http://opensource.apple.com/source/WebCore/WebCore-955.66/platform/graphics/UnitBezier.h)).\n * Special thanks to Apple and Thomas Fuchs for much of this code.\n */\n\n/**\n *  Copyright (c) 2006 Apple Computer, Inc. All rights reserved.\n *\n *  Redistribution and use in source and binary forms, with or without\n *  modification, are permitted provided that the following conditions are met:\n *\n *  1. Redistributions of source code must retain the above copyright notice,\n *  this list of conditions and the following disclaimer.\n *\n *  2. Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation\n *  and/or other materials provided with the distribution.\n *\n *  3. Neither the name of the copyright holder(s) nor the names of any\n *  contributors may be used to endorse or promote products derived from\n *  this software without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n *  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n *  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n *  ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n *  LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n *  CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n *  SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n *  INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n *  CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n;(function () {\n  // port of webkit cubic bezier handling by http://www.netzgesta.de/dev/\n  function cubicBezierAtTime(t,p1x,p1y,p2x,p2y,duration) {\n    var ax = 0,bx = 0,cx = 0,ay = 0,by = 0,cy = 0;\n    function sampleCurveX(t) {\n      return ((ax * t + bx) * t + cx) * t;\n    }\n    function sampleCurveY(t) {\n      return ((ay * t + by) * t + cy) * t;\n    }\n    function sampleCurveDerivativeX(t) {\n      return (3.0 * ax * t + 2.0 * bx) * t + cx;\n    }\n    function solveEpsilon(duration) {\n      return 1.0 / (200.0 * duration);\n    }\n    function solve(x,epsilon) {\n      return sampleCurveY(solveCurveX(x, epsilon));\n    }\n    function fabs(n) {\n      if (n >= 0) {\n        return n;\n      } else {\n        return 0 - n;\n      }\n    }\n    function solveCurveX(x, epsilon) {\n      var t0,t1,t2,x2,d2,i;\n      for (t2 = x, i = 0; i < 8; i++) {\n        x2 = sampleCurveX(t2) - x;\n        if (fabs(x2) < epsilon) {\n          return t2;\n        }\n        d2 = sampleCurveDerivativeX(t2);\n        if (fabs(d2) < 1e-6) {\n          break;\n        }\n        t2 = t2 - x2 / d2;\n      }\n      t0 = 0.0;\n      t1 = 1.0;\n      t2 = x;\n      if (t2 < t0) {\n        return t0;\n      }\n      if (t2 > t1) {\n        return t1;\n      }\n      while (t0 < t1) {\n        x2 = sampleCurveX(t2);\n        if (fabs(x2 - x) < epsilon) {\n          return t2;\n        }\n        if (x > x2) {\n          t0 = t2;\n        }else {\n          t1 = t2;\n        }\n        t2 = (t1 - t0) * 0.5 + t0;\n      }\n      return t2; // Failure.\n    }\n    cx = 3.0 * p1x;\n    bx = 3.0 * (p2x - p1x) - cx;\n    ax = 1.0 - cx - bx;\n    cy = 3.0 * p1y;\n    by = 3.0 * (p2y - p1y) - cy;\n    ay = 1.0 - cy - by;\n    return solve(t, solveEpsilon(duration));\n  }\n  /**\n   *  getCubicBezierTransition(x1, y1, x2, y2) -> Function\n   *\n   *  Generates a transition easing function that is compatible\n   *  with WebKit's CSS transitions `-webkit-transition-timing-function`\n   *  CSS property.\n   *\n   *  The W3C has more information about CSS3 transition timing functions:\n   *  http://www.w3.org/TR/css3-transitions/#transition-timing-function_tag\n   *\n   *  @param {number} x1\n   *  @param {number} y1\n   *  @param {number} x2\n   *  @param {number} y2\n   *  @return {function}\n   *  @private\n   */\n  function getCubicBezierTransition (x1, y1, x2, y2) {\n    return function (pos) {\n      return cubicBezierAtTime(pos,x1,y1,x2,y2,1);\n    };\n  }\n  // End ported code\n\n  /**\n   * Create a Bezier easing function and attach it to `{{#crossLink\n   * \"Tweenable/formula:property\"}}Tweenable#formula{{/crossLink}}`.  This\n   * function gives you total control over the easing curve.  Matthew Lein's\n   * [Ceaser](http://matthewlein.com/ceaser/) is a useful tool for visualizing\n   * the curves you can make with this function.\n   * @method setBezierFunction\n   * @param {string} name The name of the easing curve.  Overwrites the old\n   * easing function on `{{#crossLink\n   * \"Tweenable/formula:property\"}}Tweenable#formula{{/crossLink}}` if it\n   * exists.\n   * @param {number} x1\n   * @param {number} y1\n   * @param {number} x2\n   * @param {number} y2\n   * @return {function} The easing function that was attached to\n   * Tweenable.prototype.formula.\n   */\n  Tweenable.setBezierFunction = function (name, x1, y1, x2, y2) {\n    var cubicBezierTransition = getCubicBezierTransition(x1, y1, x2, y2);\n    cubicBezierTransition.displayName = name;\n    cubicBezierTransition.x1 = x1;\n    cubicBezierTransition.y1 = y1;\n    cubicBezierTransition.x2 = x2;\n    cubicBezierTransition.y2 = y2;\n\n    return Tweenable.prototype.formula[name] = cubicBezierTransition;\n  };\n\n\n  /**\n   * `delete` an easing function from `{{#crossLink\n   * \"Tweenable/formula:property\"}}Tweenable#formula{{/crossLink}}`.  Be\n   * careful with this method, as it `delete`s whatever easing formula matches\n   * `name` (which means you can delete standard Shifty easing functions).\n   * @method unsetBezierFunction\n   * @param {string} name The name of the easing function to delete.\n   * @return {function}\n   */\n  Tweenable.unsetBezierFunction = function (name) {\n    delete Tweenable.prototype.formula[name];\n  };\n\n})();\n\n;(function () {\n\n  function getInterpolatedValues (\n    from, current, targetState, position, easing, delay) {\n    return Tweenable.tweenProps(\n      position, current, from, targetState, 1, delay, easing);\n  }\n\n  // Fake a Tweenable and patch some internals.  This approach allows us to\n  // skip uneccessary processing and object recreation, cutting down on garbage\n  // collection pauses.\n  var mockTweenable = new Tweenable();\n  mockTweenable._filterArgs = [];\n\n  /**\n   * Compute the midpoint of two Objects.  This method effectively calculates a\n   * specific frame of animation that `{{#crossLink\n   * \"Tweenable/tween:method\"}}{{/crossLink}}` does many times over the course\n   * of a full tween.\n   *\n   *     var interpolatedValues = Tweenable.interpolate({\n   *       width: '100px',\n   *       opacity: 0,\n   *       color: '#fff'\n   *     }, {\n   *       width: '200px',\n   *       opacity: 1,\n   *       color: '#000'\n   *     }, 0.5);\n   *\n   *     console.log(interpolatedValues);\n   *     // {opacity: 0.5, width: \"150px\", color: \"rgb(127,127,127)\"}\n   *\n   * @static\n   * @method interpolate\n   * @param {Object} from The starting values to tween from.\n   * @param {Object} targetState The ending values to tween to.\n   * @param {number} position The normalized position value (between `0.0` and\n   * `1.0`) to interpolate the values between `from` and `to` for.  `from`\n   * represents `0` and `to` represents `1`.\n   * @param {Object.<string|Function>|string|Function} easing The easing\n   * curve(s) to calculate the midpoint against.  You can reference any easing\n   * function attached to `Tweenable.prototype.formula`, or provide the easing\n   * function(s) directly.  If omitted, this defaults to \"linear\".\n   * @param {number=} opt_delay Optional delay to pad the beginning of the\n   * interpolated tween with.  This increases the range of `position` from (`0`\n   * through `1`) to (`0` through `1 + opt_delay`).  So, a delay of `0.5` would\n   * increase all valid values of `position` to numbers between `0` and `1.5`.\n   * @return {Object}\n   */\n  Tweenable.interpolate = function (\n    from, targetState, position, easing, opt_delay) {\n\n    var current = Tweenable.shallowCopy({}, from);\n    var delay = opt_delay || 0;\n    var easingObject = Tweenable.composeEasingObject(\n      from, easing || 'linear');\n\n    mockTweenable.set({});\n\n    // Alias and reuse the _filterArgs array instead of recreating it.\n    var filterArgs = mockTweenable._filterArgs;\n    filterArgs.length = 0;\n    filterArgs[0] = current;\n    filterArgs[1] = from;\n    filterArgs[2] = targetState;\n    filterArgs[3] = easingObject;\n\n    // Any defined value transformation must be applied\n    Tweenable.applyFilter(mockTweenable, 'tweenCreated');\n    Tweenable.applyFilter(mockTweenable, 'beforeTween');\n\n    var interpolatedValues = getInterpolatedValues(\n      from, current, targetState, position, easingObject, delay);\n\n    // Transform values back into their original format\n    Tweenable.applyFilter(mockTweenable, 'afterTween');\n\n    return interpolatedValues;\n  };\n\n}());\n\n/**\n * This module adds string interpolation support to Shifty.\n *\n * The Token extension allows Shifty to tween numbers inside of strings.  Among\n * other things, this allows you to animate CSS properties.  For example, you\n * can do this:\n *\n *     var tweenable = new Tweenable();\n *     tweenable.tween({\n *       from: { transform: 'translateX(45px)' },\n *       to: { transform: 'translateX(90xp)' }\n *     });\n *\n * `translateX(45)` will be tweened to `translateX(90)`.  To demonstrate:\n *\n *     var tweenable = new Tweenable();\n *     tweenable.tween({\n *       from: { transform: 'translateX(45px)' },\n *       to: { transform: 'translateX(90px)' },\n *       step: function (state) {\n *         console.log(state.transform);\n *       }\n *     });\n *\n * The above snippet will log something like this in the console:\n *\n *     translateX(60.3px)\n *     ...\n *     translateX(76.05px)\n *     ...\n *     translateX(90px)\n *\n * Another use for this is animating colors:\n *\n *     var tweenable = new Tweenable();\n *     tweenable.tween({\n *       from: { color: 'rgb(0,255,0)' },\n *       to: { color: 'rgb(255,0,255)' },\n *       step: function (state) {\n *         console.log(state.color);\n *       }\n *     });\n *\n * The above snippet will log something like this:\n *\n *     rgb(84,170,84)\n *     ...\n *     rgb(170,84,170)\n *     ...\n *     rgb(255,0,255)\n *\n * This extension also supports hexadecimal colors, in both long (`#ff00ff`)\n * and short (`#f0f`) forms.  Be aware that hexadecimal input values will be\n * converted into the equivalent RGB output values.  This is done to optimize\n * for performance.\n *\n *     var tweenable = new Tweenable();\n *     tweenable.tween({\n *       from: { color: '#0f0' },\n *       to: { color: '#f0f' },\n *       step: function (state) {\n *         console.log(state.color);\n *       }\n *     });\n *\n * This snippet will generate the same output as the one before it because\n * equivalent values were supplied (just in hexadecimal form rather than RGB):\n *\n *     rgb(84,170,84)\n *     ...\n *     rgb(170,84,170)\n *     ...\n *     rgb(255,0,255)\n *\n * ## Easing support\n *\n * Easing works somewhat differently in the Token extension.  This is because\n * some CSS properties have multiple values in them, and you might need to\n * tween each value along its own easing curve.  A basic example:\n *\n *     var tweenable = new Tweenable();\n *     tweenable.tween({\n *       from: { transform: 'translateX(0px) translateY(0px)' },\n *       to: { transform:   'translateX(100px) translateY(100px)' },\n *       easing: { transform: 'easeInQuad' },\n *       step: function (state) {\n *         console.log(state.transform);\n *       }\n *     });\n *\n * The above snippet will create values like this:\n *\n *     translateX(11.56px) translateY(11.56px)\n *     ...\n *     translateX(46.24px) translateY(46.24px)\n *     ...\n *     translateX(100px) translateY(100px)\n *\n * In this case, the values for `translateX` and `translateY` are always the\n * same for each step of the tween, because they have the same start and end\n * points and both use the same easing curve.  We can also tween `translateX`\n * and `translateY` along independent curves:\n *\n *     var tweenable = new Tweenable();\n *     tweenable.tween({\n *       from: { transform: 'translateX(0px) translateY(0px)' },\n *       to: { transform:   'translateX(100px) translateY(100px)' },\n *       easing: { transform: 'easeInQuad bounce' },\n *       step: function (state) {\n *         console.log(state.transform);\n *       }\n *     });\n *\n * The above snippet will create values like this:\n *\n *     translateX(10.89px) translateY(82.35px)\n *     ...\n *     translateX(44.89px) translateY(86.73px)\n *     ...\n *     translateX(100px) translateY(100px)\n *\n * `translateX` and `translateY` are not in sync anymore, because `easeInQuad`\n * was specified for `translateX` and `bounce` for `translateY`.  Mixing and\n * matching easing curves can make for some interesting motion in your\n * animations.\n *\n * The order of the space-separated easing curves correspond the token values\n * they apply to.  If there are more token values than easing curves listed,\n * the last easing curve listed is used.\n * @submodule Tweenable.token\n */\n\n// token function is defined above only so that dox-foundation sees it as\n// documentation and renders it.  It is never used, and is optimized away at\n// build time.\n\n;(function (Tweenable) {\n\n  /**\n   * @typedef {{\n   *   formatString: string\n   *   chunkNames: Array.<string>\n   * }}\n   * @private\n   */\n  var formatManifest;\n\n  // CONSTANTS\n\n  var R_NUMBER_COMPONENT = /(\\d|\\-|\\.)/;\n  var R_FORMAT_CHUNKS = /([^\\-0-9\\.]+)/g;\n  var R_UNFORMATTED_VALUES = /[0-9.\\-]+/g;\n  var R_RGB = new RegExp(\n    'rgb\\\\(' + R_UNFORMATTED_VALUES.source +\n    (/,\\s*/.source) + R_UNFORMATTED_VALUES.source +\n    (/,\\s*/.source) + R_UNFORMATTED_VALUES.source + '\\\\)', 'g');\n  var R_RGB_PREFIX = /^.*\\(/;\n  var R_HEX = /#([0-9]|[a-f]){3,6}/gi;\n  var VALUE_PLACEHOLDER = 'VAL';\n\n  // HELPERS\n\n  /**\n   * @param {Array.number} rawValues\n   * @param {string} prefix\n   *\n   * @return {Array.<string>}\n   * @private\n   */\n  function getFormatChunksFrom (rawValues, prefix) {\n    var accumulator = [];\n\n    var rawValuesLength = rawValues.length;\n    var i;\n\n    for (i = 0; i < rawValuesLength; i++) {\n      accumulator.push('_' + prefix + '_' + i);\n    }\n\n    return accumulator;\n  }\n\n  /**\n   * @param {string} formattedString\n   *\n   * @return {string}\n   * @private\n   */\n  function getFormatStringFrom (formattedString) {\n    var chunks = formattedString.match(R_FORMAT_CHUNKS);\n\n    if (!chunks) {\n      // chunks will be null if there were no tokens to parse in\n      // formattedString (for example, if formattedString is '2').  Coerce\n      // chunks to be useful here.\n      chunks = ['', ''];\n\n      // If there is only one chunk, assume that the string is a number\n      // followed by a token...\n      // NOTE: This may be an unwise assumption.\n    } else if (chunks.length === 1 ||\n      // ...or if the string starts with a number component (\".\", \"-\", or a\n      // digit)...\n    formattedString.charAt(0).match(R_NUMBER_COMPONENT)) {\n      // ...prepend an empty string here to make sure that the formatted number\n      // is properly replaced by VALUE_PLACEHOLDER\n      chunks.unshift('');\n    }\n\n    return chunks.join(VALUE_PLACEHOLDER);\n  }\n\n  /**\n   * Convert all hex color values within a string to an rgb string.\n   *\n   * @param {Object} stateObject\n   *\n   * @return {Object} The modified obj\n   * @private\n   */\n  function sanitizeObjectForHexProps (stateObject) {\n    Tweenable.each(stateObject, function (prop) {\n      var currentProp = stateObject[prop];\n\n      if (typeof currentProp === 'string' && currentProp.match(R_HEX)) {\n        stateObject[prop] = sanitizeHexChunksToRGB(currentProp);\n      }\n    });\n  }\n\n  /**\n   * @param {string} str\n   *\n   * @return {string}\n   * @private\n   */\n  function  sanitizeHexChunksToRGB (str) {\n    return filterStringChunks(R_HEX, str, convertHexToRGB);\n  }\n\n  /**\n   * @param {string} hexString\n   *\n   * @return {string}\n   * @private\n   */\n  function convertHexToRGB (hexString) {\n    var rgbArr = hexToRGBArray(hexString);\n    return 'rgb(' + rgbArr[0] + ',' + rgbArr[1] + ',' + rgbArr[2] + ')';\n  }\n\n  var hexToRGBArray_returnArray = [];\n  /**\n   * Convert a hexadecimal string to an array with three items, one each for\n   * the red, blue, and green decimal values.\n   *\n   * @param {string} hex A hexadecimal string.\n   *\n   * @returns {Array.<number>} The converted Array of RGB values if `hex` is a\n   * valid string, or an Array of three 0's.\n   * @private\n   */\n  function hexToRGBArray (hex) {\n\n    hex = hex.replace(/#/, '');\n\n    // If the string is a shorthand three digit hex notation, normalize it to\n    // the standard six digit notation\n    if (hex.length === 3) {\n      hex = hex.split('');\n      hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n    }\n\n    hexToRGBArray_returnArray[0] = hexToDec(hex.substr(0, 2));\n    hexToRGBArray_returnArray[1] = hexToDec(hex.substr(2, 2));\n    hexToRGBArray_returnArray[2] = hexToDec(hex.substr(4, 2));\n\n    return hexToRGBArray_returnArray;\n  }\n\n  /**\n   * Convert a base-16 number to base-10.\n   *\n   * @param {Number|String} hex The value to convert\n   *\n   * @returns {Number} The base-10 equivalent of `hex`.\n   * @private\n   */\n  function hexToDec (hex) {\n    return parseInt(hex, 16);\n  }\n\n  /**\n   * Runs a filter operation on all chunks of a string that match a RegExp\n   *\n   * @param {RegExp} pattern\n   * @param {string} unfilteredString\n   * @param {function(string)} filter\n   *\n   * @return {string}\n   * @private\n   */\n  function filterStringChunks (pattern, unfilteredString, filter) {\n    var pattenMatches = unfilteredString.match(pattern);\n    var filteredString = unfilteredString.replace(pattern, VALUE_PLACEHOLDER);\n\n    if (pattenMatches) {\n      var pattenMatchesLength = pattenMatches.length;\n      var currentChunk;\n\n      for (var i = 0; i < pattenMatchesLength; i++) {\n        currentChunk = pattenMatches.shift();\n        filteredString = filteredString.replace(\n          VALUE_PLACEHOLDER, filter(currentChunk));\n      }\n    }\n\n    return filteredString;\n  }\n\n  /**\n   * Check for floating point values within rgb strings and rounds them.\n   *\n   * @param {string} formattedString\n   *\n   * @return {string}\n   * @private\n   */\n  function sanitizeRGBChunks (formattedString) {\n    return filterStringChunks(R_RGB, formattedString, sanitizeRGBChunk);\n  }\n\n  /**\n   * @param {string} rgbChunk\n   *\n   * @return {string}\n   * @private\n   */\n  function sanitizeRGBChunk (rgbChunk) {\n    var numbers = rgbChunk.match(R_UNFORMATTED_VALUES);\n    var numbersLength = numbers.length;\n    var sanitizedString = rgbChunk.match(R_RGB_PREFIX)[0];\n\n    for (var i = 0; i < numbersLength; i++) {\n      sanitizedString += parseInt(numbers[i], 10) + ',';\n    }\n\n    sanitizedString = sanitizedString.slice(0, -1) + ')';\n\n    return sanitizedString;\n  }\n\n  /**\n   * @param {Object} stateObject\n   *\n   * @return {Object} An Object of formatManifests that correspond to\n   * the string properties of stateObject\n   * @private\n   */\n  function getFormatManifests (stateObject) {\n    var manifestAccumulator = {};\n\n    Tweenable.each(stateObject, function (prop) {\n      var currentProp = stateObject[prop];\n\n      if (typeof currentProp === 'string') {\n        var rawValues = getValuesFrom(currentProp);\n\n        manifestAccumulator[prop] = {\n          'formatString': getFormatStringFrom(currentProp)\n          ,'chunkNames': getFormatChunksFrom(rawValues, prop)\n        };\n      }\n    });\n\n    return manifestAccumulator;\n  }\n\n  /**\n   * @param {Object} stateObject\n   * @param {Object} formatManifests\n   * @private\n   */\n  function expandFormattedProperties (stateObject, formatManifests) {\n    Tweenable.each(formatManifests, function (prop) {\n      var currentProp = stateObject[prop];\n      var rawValues = getValuesFrom(currentProp);\n      var rawValuesLength = rawValues.length;\n\n      for (var i = 0; i < rawValuesLength; i++) {\n        stateObject[formatManifests[prop].chunkNames[i]] = +rawValues[i];\n      }\n\n      delete stateObject[prop];\n    });\n  }\n\n  /**\n   * @param {Object} stateObject\n   * @param {Object} formatManifests\n   * @private\n   */\n  function collapseFormattedProperties (stateObject, formatManifests) {\n    Tweenable.each(formatManifests, function (prop) {\n      var currentProp = stateObject[prop];\n      var formatChunks = extractPropertyChunks(\n        stateObject, formatManifests[prop].chunkNames);\n      var valuesList = getValuesList(\n        formatChunks, formatManifests[prop].chunkNames);\n      currentProp = getFormattedValues(\n        formatManifests[prop].formatString, valuesList);\n      stateObject[prop] = sanitizeRGBChunks(currentProp);\n    });\n  }\n\n  /**\n   * @param {Object} stateObject\n   * @param {Array.<string>} chunkNames\n   *\n   * @return {Object} The extracted value chunks.\n   * @private\n   */\n  function extractPropertyChunks (stateObject, chunkNames) {\n    var extractedValues = {};\n    var currentChunkName, chunkNamesLength = chunkNames.length;\n\n    for (var i = 0; i < chunkNamesLength; i++) {\n      currentChunkName = chunkNames[i];\n      extractedValues[currentChunkName] = stateObject[currentChunkName];\n      delete stateObject[currentChunkName];\n    }\n\n    return extractedValues;\n  }\n\n  var getValuesList_accumulator = [];\n  /**\n   * @param {Object} stateObject\n   * @param {Array.<string>} chunkNames\n   *\n   * @return {Array.<number>}\n   * @private\n   */\n  function getValuesList (stateObject, chunkNames) {\n    getValuesList_accumulator.length = 0;\n    var chunkNamesLength = chunkNames.length;\n\n    for (var i = 0; i < chunkNamesLength; i++) {\n      getValuesList_accumulator.push(stateObject[chunkNames[i]]);\n    }\n\n    return getValuesList_accumulator;\n  }\n\n  /**\n   * @param {string} formatString\n   * @param {Array.<number>} rawValues\n   *\n   * @return {string}\n   * @private\n   */\n  function getFormattedValues (formatString, rawValues) {\n    var formattedValueString = formatString;\n    var rawValuesLength = rawValues.length;\n\n    for (var i = 0; i < rawValuesLength; i++) {\n      formattedValueString = formattedValueString.replace(\n        VALUE_PLACEHOLDER, +rawValues[i].toFixed(4));\n    }\n\n    return formattedValueString;\n  }\n\n  /**\n   * Note: It's the duty of the caller to convert the Array elements of the\n   * return value into numbers.  This is a performance optimization.\n   *\n   * @param {string} formattedString\n   *\n   * @return {Array.<string>|null}\n   * @private\n   */\n  function getValuesFrom (formattedString) {\n    return formattedString.match(R_UNFORMATTED_VALUES);\n  }\n\n  /**\n   * @param {Object} easingObject\n   * @param {Object} tokenData\n   * @private\n   */\n  function expandEasingObject (easingObject, tokenData) {\n    Tweenable.each(tokenData, function (prop) {\n      var currentProp = tokenData[prop];\n      var chunkNames = currentProp.chunkNames;\n      var chunkLength = chunkNames.length;\n\n      var easing = easingObject[prop];\n      var i;\n\n      if (typeof easing === 'string') {\n        var easingChunks = easing.split(' ');\n        var lastEasingChunk = easingChunks[easingChunks.length - 1];\n\n        for (i = 0; i < chunkLength; i++) {\n          easingObject[chunkNames[i]] = easingChunks[i] || lastEasingChunk;\n        }\n\n      } else {\n        for (i = 0; i < chunkLength; i++) {\n          easingObject[chunkNames[i]] = easing;\n        }\n      }\n\n      delete easingObject[prop];\n    });\n  }\n\n  /**\n   * @param {Object} easingObject\n   * @param {Object} tokenData\n   * @private\n   */\n  function collapseEasingObject (easingObject, tokenData) {\n    Tweenable.each(tokenData, function (prop) {\n      var currentProp = tokenData[prop];\n      var chunkNames = currentProp.chunkNames;\n      var chunkLength = chunkNames.length;\n\n      var firstEasing = easingObject[chunkNames[0]];\n      var typeofEasings = typeof firstEasing;\n\n      if (typeofEasings === 'string') {\n        var composedEasingString = '';\n\n        for (var i = 0; i < chunkLength; i++) {\n          composedEasingString += ' ' + easingObject[chunkNames[i]];\n          delete easingObject[chunkNames[i]];\n        }\n\n        easingObject[prop] = composedEasingString.substr(1);\n      } else {\n        easingObject[prop] = firstEasing;\n      }\n    });\n  }\n\n  Tweenable.prototype.filter.token = {\n    'tweenCreated': function (currentState, fromState, toState, easingObject) {\n      sanitizeObjectForHexProps(currentState);\n      sanitizeObjectForHexProps(fromState);\n      sanitizeObjectForHexProps(toState);\n      this._tokenData = getFormatManifests(currentState);\n    },\n\n    'beforeTween': function (currentState, fromState, toState, easingObject) {\n      expandEasingObject(easingObject, this._tokenData);\n      expandFormattedProperties(currentState, this._tokenData);\n      expandFormattedProperties(fromState, this._tokenData);\n      expandFormattedProperties(toState, this._tokenData);\n    },\n\n    'afterTween': function (currentState, fromState, toState, easingObject) {\n      collapseFormattedProperties(currentState, this._tokenData);\n      collapseFormattedProperties(fromState, this._tokenData);\n      collapseFormattedProperties(toState, this._tokenData);\n      collapseEasingObject(easingObject, this._tokenData);\n    }\n  };\n\n} (Tweenable));\n\n}).call(null);\n"]},"metadata":{},"sourceType":"script"}